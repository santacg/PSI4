var ka=Object.defineProperty;var Pa=(e,t,n)=>t in e?ka(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>(Pa(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Is(e,t){const n=new Set(e.split(","));return t?o=>n.has(o.toLowerCase()):o=>n.has(o)}const le={},sn=[],qe=()=>{},xa=()=>!1,Mo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Os=e=>e.startsWith("onUpdate:"),Se=Object.assign,Ls=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Aa=Object.prototype.hasOwnProperty,Y=(e,t)=>Aa.call(e,t),q=Array.isArray,rn=e=>Wn(e)==="[object Map]",Ro=e=>Wn(e)==="[object Set]",gr=e=>Wn(e)==="[object Date]",G=e=>typeof e=="function",pe=e=>typeof e=="string",Mt=e=>typeof e=="symbol",ie=e=>e!==null&&typeof e=="object",xi=e=>(ie(e)||G(e))&&G(e.then)&&G(e.catch),Ai=Object.prototype.toString,Wn=e=>Ai.call(e),Ma=e=>Wn(e).slice(8,-1),Mi=e=>Wn(e)==="[object Object]",Ns=e=>pe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rn=Is(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),To=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ra=/-(\w)/g,it=To(e=>e.replace(Ra,(t,n)=>n?n.toUpperCase():"")),Ta=/\B([A-Z])/g,mn=To(e=>e.replace(Ta,"-$1").toLowerCase()),Io=To(e=>e.charAt(0).toUpperCase()+e.slice(1)),zo=To(e=>e?`on${Io(e)}`:""),Rt=(e,t)=>!Object.is(e,t),ao=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},mo=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Dn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let mr;const $s=()=>mr||(mr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ds(e){if(q(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],s=pe(o)?Na(o):Ds(o);if(s)for(const r in s)t[r]=s[r]}return t}else if(pe(e)||ie(e))return e}const Ia=/;(?![^(]*\))/g,Oa=/:([^]+)/,La=/\/\*[^]*?\*\//g;function Na(e){const t={};return e.replace(La,"").split(Ia).forEach(n=>{if(n){const o=n.split(Oa);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function zn(e){let t="";if(pe(e))t=e;else if(q(e))for(let n=0;n<e.length;n++){const o=zn(e[n]);o&&(t+=o+" ")}else if(ie(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const $a="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Da=Is($a);function Ri(e){return!!e||e===""}function ja(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Oo(e[o],t[o]);return n}function Oo(e,t){if(e===t)return!0;let n=gr(e),o=gr(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Mt(e),o=Mt(t),n||o)return e===t;if(n=q(e),o=q(t),n||o)return n&&o?ja(e,t):!1;if(n=ie(e),o=ie(t),n||o){if(!n||!o)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const i in e){const l=e.hasOwnProperty(i),a=t.hasOwnProperty(i);if(l&&!a||!l&&a||!Oo(e[i],t[i]))return!1}}return String(e)===String(t)}function Fa(e,t){return e.findIndex(n=>Oo(n,t))}const yt=e=>pe(e)?e:e==null?"":q(e)||ie(e)&&(e.toString===Ai||!G(e.toString))?JSON.stringify(e,Ti,2):String(e),Ti=(e,t)=>t&&t.__v_isRef?Ti(e,t.value):rn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,s],r)=>(n[Qo(o,r)+" =>"]=s,n),{})}:Ro(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Qo(n))}:Mt(t)?Qo(t):ie(t)&&!q(t)&&!Mi(t)?String(t):t,Qo=(e,t="")=>{var n;return Mt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fe;class Ii{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Fe,!t&&Fe&&(this.index=(Fe.scopes||(Fe.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Fe;try{return Fe=this,t()}finally{Fe=n}}}on(){Fe=this}off(){Fe=this.parent}stop(t){if(this._active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Oi(e){return new Ii(e)}function Ka(e,t=Fe){t&&t.active&&t.effects.push(e)}function Li(){return Fe}function qa(e){Fe&&Fe.cleanups.push(e)}let qt;class js{constructor(t,n,o,s){this.fn=t,this.trigger=n,this.scheduler=o,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Ka(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Wt();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(Va(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),zt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Pt,n=qt;try{return Pt=!0,qt=this,this._runnings++,_r(this),this.fn()}finally{br(this),this._runnings--,qt=n,Pt=t}}stop(){var t;this.active&&(_r(this),br(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Va(e){return e.value}function _r(e){e._trackId++,e._depsLength=0}function br(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Ni(e.deps[t],e);e.deps.length=e._depsLength}}function Ni(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Pt=!0,fs=0;const $i=[];function Wt(){$i.push(Pt),Pt=!1}function zt(){const e=$i.pop();Pt=e===void 0?!0:e}function Fs(){fs++}function Ks(){for(fs--;!fs&&ds.length;)ds.shift()()}function Di(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const o=e.deps[e._depsLength];o!==t?(o&&Ni(o,e),e.deps[e._depsLength++]=t):e._depsLength++}}const ds=[];function ji(e,t,n){Fs();for(const o of e.keys()){let s;o._dirtyLevel<t&&(s!=null?s:s=e.get(o)===o._trackId)&&(o._shouldSchedule||(o._shouldSchedule=o._dirtyLevel===0),o._dirtyLevel=t),o._shouldSchedule&&(s!=null?s:s=e.get(o)===o._trackId)&&(o.trigger(),(!o._runnings||o.allowRecurse)&&o._dirtyLevel!==2&&(o._shouldSchedule=!1,o.scheduler&&ds.push(o.scheduler)))}Ks()}const Fi=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},_o=new WeakMap,Vt=Symbol(""),hs=Symbol("");function Oe(e,t,n){if(Pt&&qt){let o=_o.get(e);o||_o.set(e,o=new Map);let s=o.get(n);s||o.set(n,s=Fi(()=>o.delete(n))),Di(qt,s)}}function ft(e,t,n,o,s,r){const i=_o.get(e);if(!i)return;let l=[];if(t==="clear")l=[...i.values()];else if(n==="length"&&q(e)){const a=Number(o);i.forEach((c,u)=>{(u==="length"||!Mt(u)&&u>=a)&&l.push(c)})}else switch(n!==void 0&&l.push(i.get(n)),t){case"add":q(e)?Ns(n)&&l.push(i.get("length")):(l.push(i.get(Vt)),rn(e)&&l.push(i.get(hs)));break;case"delete":q(e)||(l.push(i.get(Vt)),rn(e)&&l.push(i.get(hs)));break;case"set":rn(e)&&l.push(i.get(Vt));break}Fs();for(const a of l)a&&ji(a,4);Ks()}function Ha(e,t){var n;return(n=_o.get(e))==null?void 0:n.get(t)}const Ua=Is("__proto__,__v_isRef,__isVue"),Ki=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt)),vr=Ba();function Ba(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const o=J(this);for(let r=0,i=this.length;r<i;r++)Oe(o,"get",r+"");const s=o[t](...n);return s===-1||s===!1?o[t](...n.map(J)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Wt(),Fs();const o=J(this)[t].apply(this,n);return Ks(),zt(),o}}),e}function Ga(e){const t=J(this);return Oe(t,"has",e),t.hasOwnProperty(e)}class qi{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(s?r?rc:Bi:r?Ui:Hi).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=q(t);if(!s){if(i&&Y(vr,n))return Reflect.get(vr,n,o);if(n==="hasOwnProperty")return Ga}const l=Reflect.get(t,n,o);return(Mt(n)?Ki.has(n):Ua(n))||(s||Oe(t,"get",n),r)?l:fe(l)?i&&Ns(n)?l:l.value:ie(l)?s?Wi(l):Tt(l):l}}class Vi extends qi{constructor(t=!1){super(!1,t)}set(t,n,o,s){let r=t[n];if(!this._isShallow){const a=fn(r);if(!bo(o)&&!fn(o)&&(r=J(r),o=J(o)),!q(t)&&fe(r)&&!fe(o))return a?!1:(r.value=o,!0)}const i=q(t)&&Ns(n)?Number(n)<t.length:Y(t,n),l=Reflect.set(t,n,o,s);return t===J(s)&&(i?Rt(o,r)&&ft(t,"set",n,o):ft(t,"add",n,o)),l}deleteProperty(t,n){const o=Y(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&o&&ft(t,"delete",n,void 0),s}has(t,n){const o=Reflect.has(t,n);return(!Mt(n)||!Ki.has(n))&&Oe(t,"has",n),o}ownKeys(t){return Oe(t,"iterate",q(t)?"length":Vt),Reflect.ownKeys(t)}}class Wa extends qi{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const za=new Vi,Qa=new Wa,Ya=new Vi(!0),qs=e=>e,Lo=e=>Reflect.getPrototypeOf(e);function eo(e,t,n=!1,o=!1){e=e.__v_raw;const s=J(e),r=J(t);n||(Rt(t,r)&&Oe(s,"get",t),Oe(s,"get",r));const{has:i}=Lo(s),l=o?qs:n?Us:jn;if(i.call(s,t))return l(e.get(t));if(i.call(s,r))return l(e.get(r));e!==s&&e.get(t)}function to(e,t=!1){const n=this.__v_raw,o=J(n),s=J(e);return t||(Rt(e,s)&&Oe(o,"has",e),Oe(o,"has",s)),e===s?n.has(e):n.has(e)||n.has(s)}function no(e,t=!1){return e=e.__v_raw,!t&&Oe(J(e),"iterate",Vt),Reflect.get(e,"size",e)}function yr(e){e=J(e);const t=J(this);return Lo(t).has.call(t,e)||(t.add(e),ft(t,"add",e,e)),this}function wr(e,t){t=J(t);const n=J(this),{has:o,get:s}=Lo(n);let r=o.call(n,e);r||(e=J(e),r=o.call(n,e));const i=s.call(n,e);return n.set(e,t),r?Rt(t,i)&&ft(n,"set",e,t):ft(n,"add",e,t),this}function Sr(e){const t=J(this),{has:n,get:o}=Lo(t);let s=n.call(t,e);s||(e=J(e),s=n.call(t,e)),o&&o.call(t,e);const r=t.delete(e);return s&&ft(t,"delete",e,void 0),r}function Cr(){const e=J(this),t=e.size!==0,n=e.clear();return t&&ft(e,"clear",void 0,void 0),n}function oo(e,t){return function(o,s){const r=this,i=r.__v_raw,l=J(i),a=t?qs:e?Us:jn;return!e&&Oe(l,"iterate",Vt),i.forEach((c,u)=>o.call(s,a(c),a(u),r))}}function so(e,t,n){return function(...o){const s=this.__v_raw,r=J(s),i=rn(r),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=s[e](...o),u=n?qs:t?Us:jn;return!t&&Oe(r,"iterate",a?hs:Vt),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:l?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function pt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ja(){const e={get(r){return eo(this,r)},get size(){return no(this)},has:to,add:yr,set:wr,delete:Sr,clear:Cr,forEach:oo(!1,!1)},t={get(r){return eo(this,r,!1,!0)},get size(){return no(this)},has:to,add:yr,set:wr,delete:Sr,clear:Cr,forEach:oo(!1,!0)},n={get(r){return eo(this,r,!0)},get size(){return no(this,!0)},has(r){return to.call(this,r,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:oo(!0,!1)},o={get(r){return eo(this,r,!0,!0)},get size(){return no(this,!0)},has(r){return to.call(this,r,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:oo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=so(r,!1,!1),n[r]=so(r,!0,!1),t[r]=so(r,!1,!0),o[r]=so(r,!0,!0)}),[e,n,t,o]}const[Za,Xa,ec,tc]=Ja();function Vs(e,t){const n=t?e?tc:ec:e?Xa:Za;return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(Y(n,s)&&s in o?n:o,s,r)}const nc={get:Vs(!1,!1)},oc={get:Vs(!1,!0)},sc={get:Vs(!0,!1)},Hi=new WeakMap,Ui=new WeakMap,Bi=new WeakMap,rc=new WeakMap;function ic(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lc(e){return e.__v_skip||!Object.isExtensible(e)?0:ic(Ma(e))}function Tt(e){return fn(e)?e:Hs(e,!1,za,nc,Hi)}function Gi(e){return Hs(e,!1,Ya,oc,Ui)}function Wi(e){return Hs(e,!0,Qa,sc,Bi)}function Hs(e,t,n,o,s){if(!ie(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const i=lc(e);if(i===0)return e;const l=new Proxy(e,i===2?o:n);return s.set(e,l),l}function xt(e){return fn(e)?xt(e.__v_raw):!!(e&&e.__v_isReactive)}function fn(e){return!!(e&&e.__v_isReadonly)}function bo(e){return!!(e&&e.__v_isShallow)}function zi(e){return xt(e)||fn(e)}function J(e){const t=e&&e.__v_raw;return t?J(t):e}function No(e){return Object.isExtensible(e)&&mo(e,"__v_skip",!0),e}const jn=e=>ie(e)?Tt(e):e,Us=e=>ie(e)?Wi(e):e;class Qi{constructor(t,n,o,s){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new js(()=>t(this._value),()=>co(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=o}get value(){const t=J(this);return(!t._cacheable||t.effect.dirty)&&Rt(t._value,t._value=t.effect.run())&&co(t,4),Yi(t),t.effect._dirtyLevel>=2&&co(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function ac(e,t,n=!1){let o,s;const r=G(e);return r?(o=e,s=qe):(o=e.get,s=e.set),new Qi(o,s,r||!s,n)}function Yi(e){var t;Pt&&qt&&(e=J(e),Di(qt,(t=e.dep)!=null?t:e.dep=Fi(()=>e.dep=void 0,e instanceof Qi?e:void 0)))}function co(e,t=4,n){e=J(e);const o=e.dep;o&&ji(o,t)}function fe(e){return!!(e&&e.__v_isRef===!0)}function we(e){return Ji(e,!1)}function cc(e){return Ji(e,!0)}function Ji(e,t){return fe(e)?e:new uc(e,t)}class uc{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:J(t),this._value=n?t:jn(t)}get value(){return Yi(this),this._value}set value(t){const n=this.__v_isShallow||bo(t)||fn(t);t=n?t:J(t),Rt(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:jn(t),co(this,4))}}function st(e){return fe(e)?e.value:e}const fc={get:(e,t,n)=>st(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const s=e[t];return fe(s)&&!fe(n)?(s.value=n,!0):Reflect.set(e,t,n,o)}};function Zi(e){return xt(e)?e:new Proxy(e,fc)}function dc(e){const t=q(e)?new Array(e.length):{};for(const n in e)t[n]=pc(e,n);return t}class hc{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Ha(J(this._object),this._key)}}function pc(e,t,n){const o=e[t];return fe(o)?o:new hc(e,t,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function At(e,t,n,o){try{return o?e(...o):e()}catch(s){$o(s,t,n)}}function Ye(e,t,n,o){if(G(e)){const r=At(e,t,n,o);return r&&xi(r)&&r.catch(i=>{$o(i,t,n)}),r}const s=[];for(let r=0;r<e.length;r++)s.push(Ye(e[r],t,n,o));return s}function $o(e,t,n,o=!0){const s=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,i,l)===!1)return}r=r.parent}const a=t.appContext.config.errorHandler;if(a){At(a,null,10,[e,i,l]);return}}gc(e,n,s,o)}function gc(e,t,n,o=!0){console.error(e)}let Fn=!1,ps=!1;const Pe=[];let ot=0;const ln=[];let wt=null,jt=0;const Xi=Promise.resolve();let Bs=null;function _n(e){const t=Bs||Xi;return e?t.then(this?e.bind(this):e):t}function mc(e){let t=ot+1,n=Pe.length;for(;t<n;){const o=t+n>>>1,s=Pe[o],r=Kn(s);r<e||r===e&&s.pre?t=o+1:n=o}return t}function Gs(e){(!Pe.length||!Pe.includes(e,Fn&&e.allowRecurse?ot+1:ot))&&(e.id==null?Pe.push(e):Pe.splice(mc(e.id),0,e),el())}function el(){!Fn&&!ps&&(ps=!0,Bs=Xi.then(nl))}function _c(e){const t=Pe.indexOf(e);t>ot&&Pe.splice(t,1)}function bc(e){q(e)?ln.push(...e):(!wt||!wt.includes(e,e.allowRecurse?jt+1:jt))&&ln.push(e),el()}function Er(e,t,n=Fn?ot+1:0){for(;n<Pe.length;n++){const o=Pe[n];if(o&&o.pre){if(e&&o.id!==e.uid)continue;Pe.splice(n,1),n--,o()}}}function tl(e){if(ln.length){const t=[...new Set(ln)].sort((n,o)=>Kn(n)-Kn(o));if(ln.length=0,wt){wt.push(...t);return}for(wt=t,jt=0;jt<wt.length;jt++)wt[jt]();wt=null,jt=0}}const Kn=e=>e.id==null?1/0:e.id,vc=(e,t)=>{const n=Kn(e)-Kn(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function nl(e){ps=!1,Fn=!0,Pe.sort(vc);const t=qe;try{for(ot=0;ot<Pe.length;ot++){const n=Pe[ot];n&&n.active!==!1&&At(n,null,14)}}finally{ot=0,Pe.length=0,tl(),Fn=!1,Bs=null,(Pe.length||ln.length)&&nl()}}function yc(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||le;let s=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in o){const u=`${i==="modelValue"?"model":i}Modifiers`,{number:h,trim:d}=o[u]||le;d&&(s=n.map(g=>pe(g)?g.trim():g)),h&&(s=n.map(Dn))}let l,a=o[l=zo(t)]||o[l=zo(it(t))];!a&&r&&(a=o[l=zo(mn(t))]),a&&Ye(a,e,6,s);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ye(c,e,6,s)}}function ol(e,t,n=!1){const o=t.emitsCache,s=o.get(e);if(s!==void 0)return s;const r=e.emits;let i={},l=!1;if(!G(e)){const a=c=>{const u=ol(c,t,!0);u&&(l=!0,Se(i,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(ie(e)&&o.set(e,null),null):(q(r)?r.forEach(a=>i[a]=null):Se(i,r),ie(e)&&o.set(e,i),i)}function Do(e,t){return!e||!Mo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Y(e,t[0].toLowerCase()+t.slice(1))||Y(e,mn(t))||Y(e,t))}let Ae=null,jo=null;function vo(e){const t=Ae;return Ae=e,jo=e&&e.type.__scopeId||null,t}function Qn(e){jo=e}function Yn(){jo=null}function xn(e,t=Ae,n){if(!t||e._n)return e;const o=(...s)=>{o._d&&Nr(-1);const r=vo(t);let i;try{i=e(...s)}finally{vo(r),o._d&&Nr(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Yo(e){const{type:t,vnode:n,proxy:o,withProxy:s,props:r,propsOptions:[i],slots:l,attrs:a,emit:c,render:u,renderCache:h,data:d,setupState:g,ctx:m,inheritAttrs:b}=e;let E,P;const S=vo(e);try{if(n.shapeFlag&4){const V=s||o,O=V;E=nt(u.call(O,V,h,r,g,d,m)),P=a}else{const V=t;E=nt(V.length>1?V(r,{attrs:a,slots:l,emit:c}):V(r,null)),P=t.props?a:wc(a)}}catch(V){In.length=0,$o(V,e,1),E=ve(Bt)}let L=E;if(P&&b!==!1){const V=Object.keys(P),{shapeFlag:O}=L;V.length&&O&7&&(i&&V.some(Os)&&(P=Sc(P,i)),L=dn(L,P))}return n.dirs&&(L=dn(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),E=L,vo(S),E}const wc=e=>{let t;for(const n in e)(n==="class"||n==="style"||Mo(n))&&((t||(t={}))[n]=e[n]);return t},Sc=(e,t)=>{const n={};for(const o in e)(!Os(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Cc(e,t,n){const{props:o,children:s,component:r}=e,{props:i,children:l,patchFlag:a}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return o?kr(o,i,c):!!i;if(a&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(i[d]!==o[d]&&!Do(c,d))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:o===i?!1:o?i?kr(o,i,c):!0:!!i;return!1}function kr(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let s=0;s<o.length;s++){const r=o[s];if(t[r]!==e[r]&&!Do(n,r))return!0}return!1}function Ec({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const sl="components";function kc(e,t){return xc(sl,e,!0,t)||e}const Pc=Symbol.for("v-ndc");function xc(e,t,n=!0,o=!1){const s=Ae||ye;if(s){const r=s.type;if(e===sl){const l=yu(r,!1);if(l&&(l===t||l===it(t)||l===Io(it(t))))return r}const i=Pr(s[e]||r[e],t)||Pr(s.appContext[e],t);return!i&&o?r:i}}function Pr(e,t){return e&&(e[t]||e[it(t)]||e[Io(it(t))])}const Ac=e=>e.__isSuspense;function Mc(e,t){t&&t.pendingBranch?q(e)?t.effects.push(...e):t.effects.push(e):bc(e)}const Rc=Symbol.for("v-scx"),Tc=()=>rt(Rc),ro={};function Ht(e,t,n){return rl(e,t,n)}function rl(e,t,{immediate:n,deep:o,flush:s,once:r,onTrack:i,onTrigger:l}=le){if(t&&r){const M=t;t=(...W)=>{M(...W),O()}}const a=ye,c=M=>o===!0?M:Kt(M,o===!1?1:void 0);let u,h=!1,d=!1;if(fe(e)?(u=()=>e.value,h=bo(e)):xt(e)?(u=()=>c(e),h=!0):q(e)?(d=!0,h=e.some(M=>xt(M)||bo(M)),u=()=>e.map(M=>{if(fe(M))return M.value;if(xt(M))return c(M);if(G(M))return At(M,a,2)})):G(e)?t?u=()=>At(e,a,2):u=()=>(g&&g(),Ye(e,a,3,[m])):u=qe,t&&o){const M=u;u=()=>Kt(M())}let g,m=M=>{g=L.onStop=()=>{At(M,a,4),g=L.onStop=void 0}},b;if(Ho)if(m=qe,t?n&&Ye(t,a,3,[u(),d?[]:void 0,m]):u(),s==="sync"){const M=Tc();b=M.__watcherHandles||(M.__watcherHandles=[])}else return qe;let E=d?new Array(e.length).fill(ro):ro;const P=()=>{if(!(!L.active||!L.dirty))if(t){const M=L.run();(o||h||(d?M.some((W,D)=>Rt(W,E[D])):Rt(M,E)))&&(g&&g(),Ye(t,a,3,[M,E===ro?void 0:d&&E[0]===ro?[]:E,m]),E=M)}else L.run()};P.allowRecurse=!!t;let S;s==="sync"?S=P:s==="post"?S=()=>Ie(P,a&&a.suspense):(P.pre=!0,a&&(P.id=a.uid),S=()=>Gs(P));const L=new js(u,qe,S),V=Li(),O=()=>{L.stop(),V&&Ls(V.effects,L)};return t?n?P():E=L.run():s==="post"?Ie(L.run.bind(L),a&&a.suspense):L.run(),b&&b.push(O),O}function Ic(e,t,n){const o=this.proxy,s=pe(e)?e.includes(".")?il(o,e):()=>o[e]:e.bind(o,o);let r;G(t)?r=t:(r=t.handler,n=t);const i=Jn(this),l=rl(s,r.bind(o),n);return i(),l}function il(e,t){const n=t.split(".");return()=>{let o=e;for(let s=0;s<n.length&&o;s++)o=o[n[s]];return o}}function Kt(e,t,n=0,o){if(!ie(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(o=o||new Set,o.has(e))return e;if(o.add(e),fe(e))Kt(e.value,t,n,o);else if(q(e))for(let s=0;s<e.length;s++)Kt(e[s],t,n,o);else if(Ro(e)||rn(e))e.forEach(s=>{Kt(s,t,n,o)});else if(Mi(e))for(const s in e)Kt(e[s],t,n,o);return e}function an(e,t){if(Ae===null)return e;const n=Uo(Ae)||Ae.proxy,o=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,i,l,a=le]=t[s];r&&(G(r)&&(r={mounted:r,updated:r}),r.deep&&Kt(i),o.push({dir:r,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function Nt(e,t,n,o){const s=e.dirs,r=t&&t.dirs;for(let i=0;i<s.length;i++){const l=s[i];r&&(l.oldValue=r[i].value);let a=l.dir[o];a&&(Wt(),Ye(a,n,8,[e.el,l,e,t]),zt())}}/*! #__NO_SIDE_EFFECTS__ */function Fo(e,t){return G(e)?(()=>Se({name:e.name},t,{setup:e}))():e}const uo=e=>!!e.type.__asyncLoader,ll=e=>e.type.__isKeepAlive;function Oc(e,t){al(e,"a",t)}function Lc(e,t){al(e,"da",t)}function al(e,t,n=ye){const o=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Ko(t,o,n),n){let s=n.parent;for(;s&&s.parent;)ll(s.parent.vnode)&&Nc(o,t,n,s),s=s.parent}}function Nc(e,t,n,o){const s=Ko(t,e,o,!0);ul(()=>{Ls(o[t],s)},n)}function Ko(e,t,n=ye,o=!1){if(n){const s=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;Wt();const l=Jn(n),a=Ye(t,n,e,i);return l(),zt(),a});return o?s.unshift(r):s.push(r),r}}const dt=e=>(t,n=ye)=>(!Ho||e==="sp")&&Ko(e,(...o)=>t(...o),n),cl=dt("bm"),Ws=dt("m"),$c=dt("bu"),Dc=dt("u"),jc=dt("bum"),ul=dt("um"),Fc=dt("sp"),Kc=dt("rtg"),qc=dt("rtc");function Vc(e,t=ye){Ko("ec",e,t)}function fl(e,t,n,o){let s;const r=n&&n[o];if(q(e)||pe(e)){s=new Array(e.length);for(let i=0,l=e.length;i<l;i++)s[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){s=new Array(e);for(let i=0;i<e;i++)s[i]=t(i+1,i,void 0,r&&r[i])}else if(ie(e))if(e[Symbol.iterator])s=Array.from(e,(i,l)=>t(i,l,void 0,r&&r[l]));else{const i=Object.keys(e);s=new Array(i.length);for(let l=0,a=i.length;l<a;l++){const c=i[l];s[l]=t(e[c],c,l,r&&r[l])}}else s=[];return n&&(n[o]=s),s}const gs=e=>e?Cl(e)?Uo(e)||e.proxy:gs(e.parent):null,Tn=Se(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>gs(e.parent),$root:e=>gs(e.root),$emit:e=>e.emit,$options:e=>zs(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Gs(e.update)}),$nextTick:e=>e.n||(e.n=_n.bind(e.proxy)),$watch:e=>Ic.bind(e)}),Jo=(e,t)=>e!==le&&!e.__isScriptSetup&&Y(e,t),Hc={get({_:e},t){const{ctx:n,setupState:o,data:s,props:r,accessCache:i,type:l,appContext:a}=e;let c;if(t[0]!=="$"){const g=i[t];if(g!==void 0)switch(g){case 1:return o[t];case 2:return s[t];case 4:return n[t];case 3:return r[t]}else{if(Jo(o,t))return i[t]=1,o[t];if(s!==le&&Y(s,t))return i[t]=2,s[t];if((c=e.propsOptions[0])&&Y(c,t))return i[t]=3,r[t];if(n!==le&&Y(n,t))return i[t]=4,n[t];ms&&(i[t]=0)}}const u=Tn[t];let h,d;if(u)return t==="$attrs"&&Oe(e,"get",t),u(e);if((h=l.__cssModules)&&(h=h[t]))return h;if(n!==le&&Y(n,t))return i[t]=4,n[t];if(d=a.config.globalProperties,Y(d,t))return d[t]},set({_:e},t,n){const{data:o,setupState:s,ctx:r}=e;return Jo(s,t)?(s[t]=n,!0):o!==le&&Y(o,t)?(o[t]=n,!0):Y(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:s,propsOptions:r}},i){let l;return!!n[i]||e!==le&&Y(e,i)||Jo(t,i)||(l=r[0])&&Y(l,i)||Y(o,i)||Y(Tn,i)||Y(s.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Y(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xr(e){return q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ms=!0;function Uc(e){const t=zs(e),n=e.proxy,o=e.ctx;ms=!1,t.beforeCreate&&Ar(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:i,watch:l,provide:a,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:g,updated:m,activated:b,deactivated:E,beforeDestroy:P,beforeUnmount:S,destroyed:L,unmounted:V,render:O,renderTracked:M,renderTriggered:W,errorCaptured:D,serverPrefetch:z,expose:Z,inheritAttrs:re,components:ge,directives:Ve,filters:Lt}=t;if(c&&Bc(c,o,null),i)for(const oe in i){const ee=i[oe];G(ee)&&(o[oe]=ee.bind(n))}if(s){const oe=s.call(n,n);ie(oe)&&(e.data=Tt(oe))}if(ms=!0,r)for(const oe in r){const ee=r[oe],lt=G(ee)?ee.bind(n,n):G(ee.get)?ee.get.bind(n,n):qe,ht=!G(ee)&&G(ee.set)?ee.set.bind(n):qe,Ze=Ge({get:lt,set:ht});Object.defineProperty(o,oe,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:Te=>Ze.value=Te})}if(l)for(const oe in l)dl(l[oe],o,n,oe);if(a){const oe=G(a)?a.call(n):a;Reflect.ownKeys(oe).forEach(ee=>{fo(ee,oe[ee])})}u&&Ar(u,e,"c");function X(oe,ee){q(ee)?ee.forEach(lt=>oe(lt.bind(n))):ee&&oe(ee.bind(n))}if(X(cl,h),X(Ws,d),X($c,g),X(Dc,m),X(Oc,b),X(Lc,E),X(Vc,D),X(qc,M),X(Kc,W),X(jc,S),X(ul,V),X(Fc,z),q(Z))if(Z.length){const oe=e.exposed||(e.exposed={});Z.forEach(ee=>{Object.defineProperty(oe,ee,{get:()=>n[ee],set:lt=>n[ee]=lt})})}else e.exposed||(e.exposed={});O&&e.render===qe&&(e.render=O),re!=null&&(e.inheritAttrs=re),ge&&(e.components=ge),Ve&&(e.directives=Ve)}function Bc(e,t,n=qe){q(e)&&(e=_s(e));for(const o in e){const s=e[o];let r;ie(s)?"default"in s?r=rt(s.from||o,s.default,!0):r=rt(s.from||o):r=rt(s),fe(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[o]=r}}function Ar(e,t,n){Ye(q(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function dl(e,t,n,o){const s=o.includes(".")?il(n,o):()=>n[o];if(pe(e)){const r=t[e];G(r)&&Ht(s,r)}else if(G(e))Ht(s,e.bind(n));else if(ie(e))if(q(e))e.forEach(r=>dl(r,t,n,o));else{const r=G(e.handler)?e.handler.bind(n):t[e.handler];G(r)&&Ht(s,r,e)}}function zs(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let a;return l?a=l:!s.length&&!n&&!o?a=t:(a={},s.length&&s.forEach(c=>yo(a,c,i,!0)),yo(a,t,i)),ie(t)&&r.set(t,a),a}function yo(e,t,n,o=!1){const{mixins:s,extends:r}=t;r&&yo(e,r,n,!0),s&&s.forEach(i=>yo(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const l=Gc[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const Gc={data:Mr,props:Rr,emits:Rr,methods:An,computed:An,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:An,directives:An,watch:zc,provide:Mr,inject:Wc};function Mr(e,t){return t?e?function(){return Se(G(e)?e.call(this,this):e,G(t)?t.call(this,this):t)}:t:e}function Wc(e,t){return An(_s(e),_s(t))}function _s(e){if(q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xe(e,t){return e?[...new Set([].concat(e,t))]:t}function An(e,t){return e?Se(Object.create(null),e,t):t}function Rr(e,t){return e?q(e)&&q(t)?[...new Set([...e,...t])]:Se(Object.create(null),xr(e),xr(t!=null?t:{})):t}function zc(e,t){if(!e)return t;if(!t)return e;const n=Se(Object.create(null),e);for(const o in t)n[o]=xe(e[o],t[o]);return n}function hl(){return{app:null,config:{isNativeTag:xa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qc=0;function Yc(e,t){return function(o,s=null){G(o)||(o=Se({},o)),s!=null&&!ie(s)&&(s=null);const r=hl(),i=new WeakSet;let l=!1;const a=r.app={_uid:Qc++,_component:o,_props:s,_container:null,_context:r,_instance:null,version:Su,get config(){return r.config},set config(c){},use(c,...u){return i.has(c)||(c&&G(c.install)?(i.add(c),c.install(a,...u)):G(c)&&(i.add(c),c(a,...u))),a},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),a},component(c,u){return u?(r.components[c]=u,a):r.components[c]},directive(c,u){return u?(r.directives[c]=u,a):r.directives[c]},mount(c,u,h){if(!l){const d=ve(o,s);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),u&&t?t(d,c):e(d,c,h),l=!0,a._container=c,c.__vue_app__=a,Uo(d.component)||d.component.proxy}},unmount(){l&&(e(null,a._container),delete a._container.__vue_app__)},provide(c,u){return r.provides[c]=u,a},runWithContext(c){const u=cn;cn=a;try{return c()}finally{cn=u}}};return a}}let cn=null;function fo(e,t){if(ye){let n=ye.provides;const o=ye.parent&&ye.parent.provides;o===n&&(n=ye.provides=Object.create(o)),n[e]=t}}function rt(e,t,n=!1){const o=ye||Ae;if(o||cn){const s=o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:cn._context.provides;if(s&&e in s)return s[e];if(arguments.length>1)return n&&G(t)?t.call(o&&o.proxy):t}}function Jc(){return!!(ye||Ae||cn)}function Zc(e,t,n,o=!1){const s={},r={};mo(r,Vo,1),e.propsDefaults=Object.create(null),pl(e,t,s,r);for(const i in e.propsOptions[0])i in s||(s[i]=void 0);n?e.props=o?s:Gi(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function Xc(e,t,n,o){const{props:s,attrs:r,vnode:{patchFlag:i}}=e,l=J(s),[a]=e.propsOptions;let c=!1;if((o||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Do(e.emitsOptions,d))continue;const g=t[d];if(a)if(Y(r,d))g!==r[d]&&(r[d]=g,c=!0);else{const m=it(d);s[m]=bs(a,l,m,g,e,!1)}else g!==r[d]&&(r[d]=g,c=!0)}}}else{pl(e,t,s,r)&&(c=!0);let u;for(const h in l)(!t||!Y(t,h)&&((u=mn(h))===h||!Y(t,u)))&&(a?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=bs(a,l,h,void 0,e,!0)):delete s[h]);if(r!==l)for(const h in r)(!t||!Y(t,h)&&!0)&&(delete r[h],c=!0)}c&&ft(e,"set","$attrs")}function pl(e,t,n,o){const[s,r]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(Rn(a))continue;const c=t[a];let u;s&&Y(s,u=it(a))?!r||!r.includes(u)?n[u]=c:(l||(l={}))[u]=c:Do(e.emitsOptions,a)||(!(a in o)||c!==o[a])&&(o[a]=c,i=!0)}if(r){const a=J(n),c=l||le;for(let u=0;u<r.length;u++){const h=r[u];n[h]=bs(s,a,h,c[h],e,!Y(c,h))}}return i}function bs(e,t,n,o,s,r){const i=e[n];if(i!=null){const l=Y(i,"default");if(l&&o===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&G(a)){const{propsDefaults:c}=s;if(n in c)o=c[n];else{const u=Jn(s);o=c[n]=a.call(null,t),u()}}else o=a}i[0]&&(r&&!l?o=!1:i[1]&&(o===""||o===mn(n))&&(o=!0))}return o}function gl(e,t,n=!1){const o=t.propsCache,s=o.get(e);if(s)return s;const r=e.props,i={},l=[];let a=!1;if(!G(e)){const u=h=>{a=!0;const[d,g]=gl(h,t,!0);Se(i,d),g&&l.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!a)return ie(e)&&o.set(e,sn),sn;if(q(r))for(let u=0;u<r.length;u++){const h=it(r[u]);Tr(h)&&(i[h]=le)}else if(r)for(const u in r){const h=it(u);if(Tr(h)){const d=r[u],g=i[h]=q(d)||G(d)?{type:d}:Se({},d);if(g){const m=Lr(Boolean,g.type),b=Lr(String,g.type);g[0]=m>-1,g[1]=b<0||m<b,(m>-1||Y(g,"default"))&&l.push(h)}}}const c=[i,l];return ie(e)&&o.set(e,c),c}function Tr(e){return e[0]!=="$"&&!Rn(e)}function Ir(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Or(e,t){return Ir(e)===Ir(t)}function Lr(e,t){return q(t)?t.findIndex(n=>Or(n,e)):G(t)&&Or(t,e)?0:-1}const ml=e=>e[0]==="_"||e==="$stable",Qs=e=>q(e)?e.map(nt):[nt(e)],eu=(e,t,n)=>{if(t._n)return t;const o=xn((...s)=>Qs(t(...s)),n);return o._c=!1,o},_l=(e,t,n)=>{const o=e._ctx;for(const s in e){if(ml(s))continue;const r=e[s];if(G(r))t[s]=eu(s,r,o);else if(r!=null){const i=Qs(r);t[s]=()=>i}}},bl=(e,t)=>{const n=Qs(t);e.slots.default=()=>n},tu=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=J(t),mo(t,"_",n)):_l(t,e.slots={})}else e.slots={},t&&bl(e,t);mo(e.slots,Vo,1)},nu=(e,t,n)=>{const{vnode:o,slots:s}=e;let r=!0,i=le;if(o.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:(Se(s,t),!n&&l===1&&delete s._):(r=!t.$stable,_l(t,s)),i=t}else t&&(bl(e,t),i={default:1});if(r)for(const l in s)!ml(l)&&i[l]==null&&delete s[l]};function vs(e,t,n,o,s=!1){if(q(e)){e.forEach((d,g)=>vs(d,t&&(q(t)?t[g]:t),n,o,s));return}if(uo(o)&&!s)return;const r=o.shapeFlag&4?Uo(o.component)||o.component.proxy:o.el,i=s?null:r,{i:l,r:a}=e,c=t&&t.r,u=l.refs===le?l.refs={}:l.refs,h=l.setupState;if(c!=null&&c!==a&&(pe(c)?(u[c]=null,Y(h,c)&&(h[c]=null)):fe(c)&&(c.value=null)),G(a))At(a,l,12,[i,u]);else{const d=pe(a),g=fe(a);if(d||g){const m=()=>{if(e.f){const b=d?Y(h,a)?h[a]:u[a]:a.value;s?q(b)&&Ls(b,r):q(b)?b.includes(r)||b.push(r):d?(u[a]=[r],Y(h,a)&&(h[a]=u[a])):(a.value=[r],e.k&&(u[e.k]=a.value))}else d?(u[a]=i,Y(h,a)&&(h[a]=i)):g&&(a.value=i,e.k&&(u[e.k]=i))};i?(m.id=-1,Ie(m,n)):m()}}}function ou(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&($s().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Ie=Mc;function su(e){return ru(e)}function ru(e,t){ou();const n=$s();n.__VUE__=!0;const{insert:o,remove:s,patchProp:r,createElement:i,createText:l,createComment:a,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:g=qe,insertStaticContent:m}=e,b=(f,p,_,w=null,v=null,x=null,I=void 0,k=null,A=!!p.dynamicChildren)=>{if(f===p)return;f&&!Sn(f,p)&&(w=y(f),Te(f,v,x,!0),f=null),p.patchFlag===-2&&(A=!1,p.dynamicChildren=null);const{type:C,ref:$,shapeFlag:K}=p;switch(C){case qo:E(f,p,_,w);break;case Bt:P(f,p,_,w);break;case Xo:f==null&&S(p,_,w,I);break;case Ke:ge(f,p,_,w,v,x,I,k,A);break;default:K&1?O(f,p,_,w,v,x,I,k,A):K&6?Ve(f,p,_,w,v,x,I,k,A):(K&64||K&128)&&C.process(f,p,_,w,v,x,I,k,A,j)}$!=null&&v&&vs($,f&&f.ref,x,p||f,!p)},E=(f,p,_,w)=>{if(f==null)o(p.el=l(p.children),_,w);else{const v=p.el=f.el;p.children!==f.children&&c(v,p.children)}},P=(f,p,_,w)=>{f==null?o(p.el=a(p.children||""),_,w):p.el=f.el},S=(f,p,_,w)=>{[f.el,f.anchor]=m(f.children,p,_,w,f.el,f.anchor)},L=({el:f,anchor:p},_,w)=>{let v;for(;f&&f!==p;)v=d(f),o(f,_,w),f=v;o(p,_,w)},V=({el:f,anchor:p})=>{let _;for(;f&&f!==p;)_=d(f),s(f),f=_;s(p)},O=(f,p,_,w,v,x,I,k,A)=>{p.type==="svg"?I="svg":p.type==="math"&&(I="mathml"),f==null?M(p,_,w,v,x,I,k,A):z(f,p,v,x,I,k,A)},M=(f,p,_,w,v,x,I,k)=>{let A,C;const{props:$,shapeFlag:K,transition:F,dirs:U}=f;if(A=f.el=i(f.type,x,$&&$.is,$),K&8?u(A,f.children):K&16&&D(f.children,A,null,w,v,Zo(f,x),I,k),U&&Nt(f,null,w,"created"),W(A,f,f.scopeId,I,w),$){for(const se in $)se!=="value"&&!Rn(se)&&r(A,se,null,$[se],x,f.children,w,v,Ce);"value"in $&&r(A,"value",null,$.value,x),(C=$.onVnodeBeforeMount)&&et(C,w,f)}U&&Nt(f,null,w,"beforeMount");const Q=iu(v,F);Q&&F.beforeEnter(A),o(A,p,_),((C=$&&$.onVnodeMounted)||Q||U)&&Ie(()=>{C&&et(C,w,f),Q&&F.enter(A),U&&Nt(f,null,w,"mounted")},v)},W=(f,p,_,w,v)=>{if(_&&g(f,_),w)for(let x=0;x<w.length;x++)g(f,w[x]);if(v){let x=v.subTree;if(p===x){const I=v.vnode;W(f,I,I.scopeId,I.slotScopeIds,v.parent)}}},D=(f,p,_,w,v,x,I,k,A=0)=>{for(let C=A;C<f.length;C++){const $=f[C]=k?St(f[C]):nt(f[C]);b(null,$,p,_,w,v,x,I,k)}},z=(f,p,_,w,v,x,I)=>{const k=p.el=f.el;let{patchFlag:A,dynamicChildren:C,dirs:$}=p;A|=f.patchFlag&16;const K=f.props||le,F=p.props||le;let U;if(_&&$t(_,!1),(U=F.onVnodeBeforeUpdate)&&et(U,_,p,f),$&&Nt(p,f,_,"beforeUpdate"),_&&$t(_,!0),C?Z(f.dynamicChildren,C,k,_,w,Zo(p,v),x):I||ee(f,p,k,null,_,w,Zo(p,v),x,!1),A>0){if(A&16)re(k,p,K,F,_,w,v);else if(A&2&&K.class!==F.class&&r(k,"class",null,F.class,v),A&4&&r(k,"style",K.style,F.style,v),A&8){const Q=p.dynamicProps;for(let se=0;se<Q.length;se++){const ce=Q[se],me=K[ce],ze=F[ce];(ze!==me||ce==="value")&&r(k,ce,me,ze,v,f.children,_,w,Ce)}}A&1&&f.children!==p.children&&u(k,p.children)}else!I&&C==null&&re(k,p,K,F,_,w,v);((U=F.onVnodeUpdated)||$)&&Ie(()=>{U&&et(U,_,p,f),$&&Nt(p,f,_,"updated")},w)},Z=(f,p,_,w,v,x,I)=>{for(let k=0;k<p.length;k++){const A=f[k],C=p[k],$=A.el&&(A.type===Ke||!Sn(A,C)||A.shapeFlag&70)?h(A.el):_;b(A,C,$,null,w,v,x,I,!0)}},re=(f,p,_,w,v,x,I)=>{if(_!==w){if(_!==le)for(const k in _)!Rn(k)&&!(k in w)&&r(f,k,_[k],null,I,p.children,v,x,Ce);for(const k in w){if(Rn(k))continue;const A=w[k],C=_[k];A!==C&&k!=="value"&&r(f,k,C,A,I,p.children,v,x,Ce)}"value"in w&&r(f,"value",_.value,w.value,I)}},ge=(f,p,_,w,v,x,I,k,A)=>{const C=p.el=f?f.el:l(""),$=p.anchor=f?f.anchor:l("");let{patchFlag:K,dynamicChildren:F,slotScopeIds:U}=p;U&&(k=k?k.concat(U):U),f==null?(o(C,_,w),o($,_,w),D(p.children||[],_,$,v,x,I,k,A)):K>0&&K&64&&F&&f.dynamicChildren?(Z(f.dynamicChildren,F,_,v,x,I,k),(p.key!=null||v&&p===v.subTree)&&vl(f,p,!0)):ee(f,p,_,$,v,x,I,k,A)},Ve=(f,p,_,w,v,x,I,k,A)=>{p.slotScopeIds=k,f==null?p.shapeFlag&512?v.ctx.activate(p,_,w,I,A):Lt(p,_,w,v,x,I,A):He(f,p,A)},Lt=(f,p,_,w,v,x,I)=>{const k=f.component=gu(f,w,v);if(ll(f)&&(k.ctx.renderer=j),mu(k),k.asyncDep){if(v&&v.registerDep(k,X),!f.el){const A=k.subTree=ve(Bt);P(null,A,p,_)}}else X(k,f,p,_,v,x,I)},He=(f,p,_)=>{const w=p.component=f.component;if(Cc(f,p,_))if(w.asyncDep&&!w.asyncResolved){oe(w,p,_);return}else w.next=p,_c(w.update),w.effect.dirty=!0,w.update();else p.el=f.el,w.vnode=p},X=(f,p,_,w,v,x,I)=>{const k=()=>{if(f.isMounted){let{next:$,bu:K,u:F,parent:U,vnode:Q}=f;{const en=yl(f);if(en){$&&($.el=Q.el,oe(f,$,I)),en.asyncDep.then(()=>{f.isUnmounted||k()});return}}let se=$,ce;$t(f,!1),$?($.el=Q.el,oe(f,$,I)):$=Q,K&&ao(K),(ce=$.props&&$.props.onVnodeBeforeUpdate)&&et(ce,U,$,Q),$t(f,!0);const me=Yo(f),ze=f.subTree;f.subTree=me,b(ze,me,h(ze.el),y(ze),f,v,x),$.el=me.el,se===null&&Ec(f,me.el),F&&Ie(F,v),(ce=$.props&&$.props.onVnodeUpdated)&&Ie(()=>et(ce,U,$,Q),v)}else{let $;const{el:K,props:F}=p,{bm:U,m:Q,parent:se}=f,ce=uo(p);if($t(f,!1),U&&ao(U),!ce&&($=F&&F.onVnodeBeforeMount)&&et($,se,p),$t(f,!0),K&&ae){const me=()=>{f.subTree=Yo(f),ae(K,f.subTree,f,v,null)};ce?p.type.__asyncLoader().then(()=>!f.isUnmounted&&me()):me()}else{const me=f.subTree=Yo(f);b(null,me,_,w,f,v,x),p.el=me.el}if(Q&&Ie(Q,v),!ce&&($=F&&F.onVnodeMounted)){const me=p;Ie(()=>et($,se,me),v)}(p.shapeFlag&256||se&&uo(se.vnode)&&se.vnode.shapeFlag&256)&&f.a&&Ie(f.a,v),f.isMounted=!0,p=_=w=null}},A=f.effect=new js(k,qe,()=>Gs(C),f.scope),C=f.update=()=>{A.dirty&&A.run()};C.id=f.uid,$t(f,!0),C()},oe=(f,p,_)=>{p.component=f;const w=f.vnode.props;f.vnode=p,f.next=null,Xc(f,p.props,w,_),nu(f,p.children,_),Wt(),Er(f),zt()},ee=(f,p,_,w,v,x,I,k,A=!1)=>{const C=f&&f.children,$=f?f.shapeFlag:0,K=p.children,{patchFlag:F,shapeFlag:U}=p;if(F>0){if(F&128){ht(C,K,_,w,v,x,I,k,A);return}else if(F&256){lt(C,K,_,w,v,x,I,k,A);return}}U&8?($&16&&Ce(C,v,x),K!==C&&u(_,K)):$&16?U&16?ht(C,K,_,w,v,x,I,k,A):Ce(C,v,x,!0):($&8&&u(_,""),U&16&&D(K,_,w,v,x,I,k,A))},lt=(f,p,_,w,v,x,I,k,A)=>{f=f||sn,p=p||sn;const C=f.length,$=p.length,K=Math.min(C,$);let F;for(F=0;F<K;F++){const U=p[F]=A?St(p[F]):nt(p[F]);b(f[F],U,_,null,v,x,I,k,A)}C>$?Ce(f,v,x,!0,!1,K):D(p,_,w,v,x,I,k,A,K)},ht=(f,p,_,w,v,x,I,k,A)=>{let C=0;const $=p.length;let K=f.length-1,F=$-1;for(;C<=K&&C<=F;){const U=f[C],Q=p[C]=A?St(p[C]):nt(p[C]);if(Sn(U,Q))b(U,Q,_,null,v,x,I,k,A);else break;C++}for(;C<=K&&C<=F;){const U=f[K],Q=p[F]=A?St(p[F]):nt(p[F]);if(Sn(U,Q))b(U,Q,_,null,v,x,I,k,A);else break;K--,F--}if(C>K){if(C<=F){const U=F+1,Q=U<$?p[U].el:w;for(;C<=F;)b(null,p[C]=A?St(p[C]):nt(p[C]),_,Q,v,x,I,k,A),C++}}else if(C>F)for(;C<=K;)Te(f[C],v,x,!0),C++;else{const U=C,Q=C,se=new Map;for(C=Q;C<=F;C++){const $e=p[C]=A?St(p[C]):nt(p[C]);$e.key!=null&&se.set($e.key,C)}let ce,me=0;const ze=F-Q+1;let en=!1,dr=0;const wn=new Array(ze);for(C=0;C<ze;C++)wn[C]=0;for(C=U;C<=K;C++){const $e=f[C];if(me>=ze){Te($e,v,x,!0);continue}let Xe;if($e.key!=null)Xe=se.get($e.key);else for(ce=Q;ce<=F;ce++)if(wn[ce-Q]===0&&Sn($e,p[ce])){Xe=ce;break}Xe===void 0?Te($e,v,x,!0):(wn[Xe-Q]=C+1,Xe>=dr?dr=Xe:en=!0,b($e,p[Xe],_,null,v,x,I,k,A),me++)}const hr=en?lu(wn):sn;for(ce=hr.length-1,C=ze-1;C>=0;C--){const $e=Q+C,Xe=p[$e],pr=$e+1<$?p[$e+1].el:w;wn[C]===0?b(null,Xe,_,pr,v,x,I,k,A):en&&(ce<0||C!==hr[ce]?Ze(Xe,_,pr,2):ce--)}}},Ze=(f,p,_,w,v=null)=>{const{el:x,type:I,transition:k,children:A,shapeFlag:C}=f;if(C&6){Ze(f.component.subTree,p,_,w);return}if(C&128){f.suspense.move(p,_,w);return}if(C&64){I.move(f,p,_,j);return}if(I===Ke){o(x,p,_);for(let K=0;K<A.length;K++)Ze(A[K],p,_,w);o(f.anchor,p,_);return}if(I===Xo){L(f,p,_);return}if(w!==2&&C&1&&k)if(w===0)k.beforeEnter(x),o(x,p,_),Ie(()=>k.enter(x),v);else{const{leave:K,delayLeave:F,afterLeave:U}=k,Q=()=>o(x,p,_),se=()=>{K(x,()=>{Q(),U&&U()})};F?F(x,Q,se):se()}else o(x,p,_)},Te=(f,p,_,w=!1,v=!1)=>{const{type:x,props:I,ref:k,children:A,dynamicChildren:C,shapeFlag:$,patchFlag:K,dirs:F}=f;if(k!=null&&vs(k,null,_,f,!0),$&256){p.ctx.deactivate(f);return}const U=$&1&&F,Q=!uo(f);let se;if(Q&&(se=I&&I.onVnodeBeforeUnmount)&&et(se,p,f),$&6)Xn(f.component,_,w);else{if($&128){f.suspense.unmount(_,w);return}U&&Nt(f,null,p,"beforeUnmount"),$&64?f.type.remove(f,p,_,v,j,w):C&&(x!==Ke||K>0&&K&64)?Ce(C,p,_,!1,!0):(x===Ke&&K&384||!v&&$&16)&&Ce(A,p,_),w&&Zt(f)}(Q&&(se=I&&I.onVnodeUnmounted)||U)&&Ie(()=>{se&&et(se,p,f),U&&Nt(f,null,p,"unmounted")},_)},Zt=f=>{const{type:p,el:_,anchor:w,transition:v}=f;if(p===Ke){Xt(_,w);return}if(p===Xo){V(f);return}const x=()=>{s(_),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(f.shapeFlag&1&&v&&!v.persisted){const{leave:I,delayLeave:k}=v,A=()=>I(_,x);k?k(f.el,x,A):A()}else x()},Xt=(f,p)=>{let _;for(;f!==p;)_=d(f),s(f),f=_;s(p)},Xn=(f,p,_)=>{const{bum:w,scope:v,update:x,subTree:I,um:k}=f;w&&ao(w),v.stop(),x&&(x.active=!1,Te(I,f,p,_)),k&&Ie(k,p),Ie(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},Ce=(f,p,_,w=!1,v=!1,x=0)=>{for(let I=x;I<f.length;I++)Te(f[I],p,_,w,v)},y=f=>f.shapeFlag&6?y(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el);let N=!1;const T=(f,p,_)=>{f==null?p._vnode&&Te(p._vnode,null,null,!0):b(p._vnode||null,f,p,null,null,null,_),N||(N=!0,Er(),tl(),N=!1),p._vnode=f},j={p:b,um:Te,m:Ze,r:Zt,mt:Lt,mc:D,pc:ee,pbc:Z,n:y,o:e};let te,ae;return t&&([te,ae]=t(j)),{render:T,hydrate:te,createApp:Yc(T,te)}}function Zo({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function $t({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function iu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function vl(e,t,n=!1){const o=e.children,s=t.children;if(q(o)&&q(s))for(let r=0;r<o.length;r++){const i=o[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=St(s[r]),l.el=i.el),n||vl(i,l)),l.type===qo&&(l.el=i.el)}}function lu(e){const t=e.slice(),n=[0];let o,s,r,i,l;const a=e.length;for(o=0;o<a;o++){const c=e[o];if(c!==0){if(s=n[n.length-1],e[s]<c){t[o]=s,n.push(o);continue}for(r=0,i=n.length-1;r<i;)l=r+i>>1,e[n[l]]<c?r=l+1:i=l;c<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function yl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yl(t)}const au=e=>e.__isTeleport,Ke=Symbol.for("v-fgt"),qo=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),Xo=Symbol.for("v-stc"),In=[];let Qe=null;function he(e=!1){In.push(Qe=e?null:[])}function cu(){In.pop(),Qe=In[In.length-1]||null}let qn=1;function Nr(e){qn+=e}function wl(e){return e.dynamicChildren=qn>0?Qe||sn:null,cu(),qn>0&&Qe&&Qe.push(e),e}function Me(e,t,n,o,s,r){return wl(R(e,t,n,o,s,r,!0))}function wo(e,t,n,o,s){return wl(ve(e,t,n,o,s,!0))}function ys(e){return e?e.__v_isVNode===!0:!1}function Sn(e,t){return e.type===t.type&&e.key===t.key}const Vo="__vInternal",Sl=({key:e})=>e!=null?e:null,ho=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?pe(e)||fe(e)||G(e)?{i:Ae,r:e,k:t,f:!!n}:e:null);function R(e,t=null,n=null,o=0,s=null,r=e===Ke?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Sl(t),ref:t&&ho(t),scopeId:jo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ae};return l?(Ys(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=pe(n)?8:16),qn>0&&!i&&Qe&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&Qe.push(a),a}const ve=uu;function uu(e,t=null,n=null,o=0,s=null,r=!1){if((!e||e===Pc)&&(e=Bt),ys(e)){const l=dn(e,t,!0);return n&&Ys(l,n),qn>0&&!r&&Qe&&(l.shapeFlag&6?Qe[Qe.indexOf(e)]=l:Qe.push(l)),l.patchFlag|=-2,l}if(wu(e)&&(e=e.__vccOpts),t){t=fu(t);let{class:l,style:a}=t;l&&!pe(l)&&(t.class=zn(l)),ie(a)&&(zi(a)&&!q(a)&&(a=Se({},a)),t.style=Ds(a))}const i=pe(e)?1:Ac(e)?128:au(e)?64:ie(e)?4:G(e)?2:0;return R(e,t,n,o,s,i,r,!0)}function fu(e){return e?zi(e)||Vo in e?Se({},e):e:null}function dn(e,t,n=!1){const{props:o,ref:s,patchFlag:r,children:i}=e,l=t?du(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Sl(l),ref:t&&t.ref?n&&s?q(s)?s.concat(ho(t)):[s,ho(t)]:ho(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ke?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dn(e.ssContent),ssFallback:e.ssFallback&&dn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function on(e=" ",t=0){return ve(qo,null,e,t)}function hn(e="",t=!1){return t?(he(),wo(Bt,null,e)):ve(Bt,null,e)}function nt(e){return e==null||typeof e=="boolean"?ve(Bt):q(e)?ve(Ke,null,e.slice()):typeof e=="object"?St(e):ve(qo,null,String(e))}function St(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dn(e)}function Ys(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(q(t))n=16;else if(typeof t=="object")if(o&65){const s=t.default;s&&(s._c&&(s._d=!1),Ys(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!(Vo in t)?t._ctx=Ae:s===3&&Ae&&(Ae.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else G(t)?(t={default:t,_ctx:Ae},n=32):(t=String(t),o&64?(n=16,t=[on(t)]):n=8);e.children=t,e.shapeFlag|=n}function du(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const s in o)if(s==="class")t.class!==o.class&&(t.class=zn([t.class,o.class]));else if(s==="style")t.style=Ds([t.style,o.style]);else if(Mo(s)){const r=t[s],i=o[s];i&&r!==i&&!(q(r)&&r.includes(i))&&(t[s]=r?[].concat(r,i):i)}else s!==""&&(t[s]=o[s])}return t}function et(e,t,n,o=null){Ye(e,t,7,[n,o])}const hu=hl();let pu=0;function gu(e,t,n){const o=e.type,s=(t?t.appContext:e.appContext)||hu,r={uid:pu++,vnode:e,type:o,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ii(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gl(o,s),emitsOptions:ol(o,s),emit:null,emitted:null,propsDefaults:le,inheritAttrs:o.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=yc.bind(null,r),e.ce&&e.ce(r),r}let ye=null,So,ws;{const e=$s(),t=(n,o)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(o),r=>{s.length>1?s.forEach(i=>i(r)):s[0](r)}};So=t("__VUE_INSTANCE_SETTERS__",n=>ye=n),ws=t("__VUE_SSR_SETTERS__",n=>Ho=n)}const Jn=e=>{const t=ye;return So(e),e.scope.on(),()=>{e.scope.off(),So(t)}},$r=()=>{ye&&ye.scope.off(),So(null)};function Cl(e){return e.vnode.shapeFlag&4}let Ho=!1;function mu(e,t=!1){t&&ws(t);const{props:n,children:o}=e.vnode,s=Cl(e);Zc(e,n,s,t),tu(e,o);const r=s?_u(e,t):void 0;return t&&ws(!1),r}function _u(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=No(new Proxy(e.ctx,Hc));const{setup:o}=n;if(o){const s=e.setupContext=o.length>1?vu(e):null,r=Jn(e);Wt();const i=At(o,e,0,[e.props,s]);if(zt(),r(),xi(i)){if(i.then($r,$r),t)return i.then(l=>{Dr(e,l,t)}).catch(l=>{$o(l,e,0)});e.asyncDep=i}else Dr(e,i,t)}else El(e,t)}function Dr(e,t,n){G(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ie(t)&&(e.setupState=Zi(t)),El(e,n)}let jr;function El(e,t,n){const o=e.type;if(!e.render){if(!t&&jr&&!o.render){const s=o.template||zs(e).template;if(s){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:l,compilerOptions:a}=o,c=Se(Se({isCustomElement:r,delimiters:l},i),a);o.render=jr(s,c)}}e.render=o.render||qe}{const s=Jn(e);Wt();try{Uc(e)}finally{zt(),s()}}}function bu(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Oe(e,"get","$attrs"),t[n]}}))}function vu(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return bu(e)},slots:e.slots,emit:e.emit,expose:t}}function Uo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Zi(No(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Tn)return Tn[n](e)},has(t,n){return n in t||n in Tn}}))}function yu(e,t=!0){return G(e)?e.displayName||e.name:e.name||t&&e.__name}function wu(e){return G(e)&&"__vccOpts"in e}const Ge=(e,t)=>ac(e,t,Ho);function kl(e,t,n){const o=arguments.length;return o===2?ie(t)&&!q(t)?ys(t)?ve(e,null,[t]):ve(e,t):ve(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&ys(n)&&(n=[n]),ve(e,t,n))}const Su="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Cu="http://www.w3.org/2000/svg",Eu="http://www.w3.org/1998/Math/MathML",Ct=typeof document<"u"?document:null,Fr=Ct&&Ct.createElement("template"),ku={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const s=t==="svg"?Ct.createElementNS(Cu,e):t==="mathml"?Ct.createElementNS(Eu,e):Ct.createElement(e,n?{is:n}:void 0);return e==="select"&&o&&o.multiple!=null&&s.setAttribute("multiple",o.multiple),s},createText:e=>Ct.createTextNode(e),createComment:e=>Ct.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ct.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,s,r){const i=n?n.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{Fr.innerHTML=o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e;const l=Fr.content;if(o==="svg"||o==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Pu=Symbol("_vtc");function xu(e,t,n){const o=e[Pu];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Kr=Symbol("_vod"),Au=Symbol("_vsh"),Mu=Symbol(""),Ru=/(^|;)\s*display\s*:/;function Tu(e,t,n){const o=e.style,s=pe(n);let r=!1;if(n&&!s){if(t)if(pe(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&po(o,l,"")}else for(const i in t)n[i]==null&&po(o,i,"");for(const i in n)i==="display"&&(r=!0),po(o,i,n[i])}else if(s){if(t!==n){const i=o[Mu];i&&(n+=";"+i),o.cssText=n,r=Ru.test(n)}}else t&&e.removeAttribute("style");Kr in e&&(e[Kr]=r?o.display:"",e[Au]&&(o.display="none"))}const qr=/\s*!important$/;function po(e,t,n){if(q(n))n.forEach(o=>po(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Iu(e,t);qr.test(n)?e.setProperty(mn(o),n.replace(qr,""),"important"):e[o]=n}}const Vr=["Webkit","Moz","ms"],es={};function Iu(e,t){const n=es[t];if(n)return n;let o=it(t);if(o!=="filter"&&o in e)return es[t]=o;o=Io(o);for(let s=0;s<Vr.length;s++){const r=Vr[s]+o;if(r in e)return es[t]=r}return t}const Hr="http://www.w3.org/1999/xlink";function Ou(e,t,n,o,s){if(o&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Hr,t.slice(6,t.length)):e.setAttributeNS(Hr,t,n);else{const r=Da(t);n==null||r&&!Ri(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function Lu(e,t,n,o,s,r,i){if(t==="innerHTML"||t==="textContent"){o&&i(o,s,r),e[t]=n==null?"":n;return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const c=l==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?"":n;(c!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Ri(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}function Ft(e,t,n,o){e.addEventListener(t,n,o)}function Nu(e,t,n,o){e.removeEventListener(t,n,o)}const Ur=Symbol("_vei");function $u(e,t,n,o,s=null){const r=e[Ur]||(e[Ur]={}),i=r[t];if(o&&i)i.value=o;else{const[l,a]=Du(t);if(o){const c=r[t]=Ku(o,s);Ft(e,l,c,a)}else i&&(Nu(e,l,i,a),r[t]=void 0)}}const Br=/(?:Once|Passive|Capture)$/;function Du(e){let t;if(Br.test(e)){t={};let o;for(;o=e.match(Br);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mn(e.slice(2)),t]}let ts=0;const ju=Promise.resolve(),Fu=()=>ts||(ju.then(()=>ts=0),ts=Date.now());function Ku(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Ye(qu(o,n.value),t,5,[o])};return n.value=e,n.attached=Fu(),n}function qu(e,t){if(q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>s=>!s._stopped&&o&&o(s))}else return t}const Gr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Vu=(e,t,n,o,s,r,i,l,a)=>{const c=s==="svg";t==="class"?xu(e,o,c):t==="style"?Tu(e,n,o):Mo(t)?Os(t)||$u(e,t,n,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hu(e,t,o,c))?Lu(e,t,o,r,i,l,a):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Ou(e,t,o,c))};function Hu(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Gr(t)&&G(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Gr(t)&&pe(n)?!1:t in e}const Co=e=>{const t=e.props["onUpdate:modelValue"]||!1;return q(t)?n=>ao(t,n):t};function Uu(e){e.target.composing=!0}function Wr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const un=Symbol("_assign"),On={created(e,{modifiers:{lazy:t,trim:n,number:o}},s){e[un]=Co(s);const r=o||s.props&&s.props.type==="number";Ft(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Dn(l)),e[un](l)}),n&&Ft(e,"change",()=>{e.value=e.value.trim()}),t||(Ft(e,"compositionstart",Uu),Ft(e,"compositionend",Wr),Ft(e,"change",Wr))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:s}},r){if(e[un]=Co(r),e.composing)return;const i=s||e.type==="number"?Dn(e.value):e.value,l=t==null?"":t;i!==l&&(document.activeElement===e&&e.type!=="range"&&(n||o&&e.value.trim()===l)||(e.value=l))}},Bu={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const s=Ro(t);Ft(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Dn(Eo(i)):Eo(i));e[un](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,_n(()=>{e._assigning=!1})}),e[un]=Co(o)},mounted(e,{value:t,modifiers:{number:n}}){zr(e,t,n)},beforeUpdate(e,t,n){e[un]=Co(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||zr(e,t,n)}};function zr(e,t,n){const o=e.multiple,s=q(t);if(!(o&&!s&&!Ro(t))){for(let r=0,i=e.options.length;r<i;r++){const l=e.options[r],a=Eo(l);if(o)if(s){const c=typeof a;c==="string"||c==="number"?l.selected=t.includes(n?Dn(a):a):l.selected=Fa(t,a)>-1}else l.selected=t.has(a);else if(Oo(Eo(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Eo(e){return"_value"in e?e._value:e.value}const Gu=["ctrl","shift","alt","meta"],Wu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Gu.some(n=>e[`${n}Key`]&&!t.includes(n))},Js=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(s,...r)=>{for(let i=0;i<t.length;i++){const l=Wu[t[i]];if(l&&l(s,t))return}return e(s,...r)})},zu=Se({patchProp:Vu},ku);let Qr;function Qu(){return Qr||(Qr=su(zu))}const Yu=(...e)=>{const t=Qu().createApp(...e),{mount:n}=t;return t.mount=o=>{const s=Zu(o);if(!s)return;const r=t._component;!G(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const i=n(s,!1,Ju(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},t};function Ju(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Zu(e){return pe(e)?document.querySelector(e):e}var Xu=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Pl;const Bo=e=>Pl=e,xl=Symbol();function Ss(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ln;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ln||(Ln={}));function ef(){const e=Oi(!0),t=e.run(()=>we({}));let n=[],o=[];const s=No({install(r){Bo(s),s._a=r,r.provide(xl,s),r.config.globalProperties.$pinia=s,o.forEach(i=>n.push(i)),o=[]},use(r){return!this._a&&!Xu?o.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Al=()=>{};function Yr(e,t,n,o=Al){e.push(t);const s=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),o())};return!n&&Li()&&qa(s),s}function tn(e,...t){e.slice().forEach(n=>{n(...t)})}const tf=e=>e();function Cs(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,o)=>e.set(o,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],s=e[n];Ss(s)&&Ss(o)&&e.hasOwnProperty(n)&&!fe(o)&&!xt(o)?e[n]=Cs(s,o):e[n]=o}return e}const nf=Symbol();function of(e){return!Ss(e)||!e.hasOwnProperty(nf)}const{assign:bt}=Object;function sf(e){return!!(fe(e)&&e.effect)}function rf(e,t,n,o){const{state:s,actions:r,getters:i}=t,l=n.state.value[e];let a;function c(){l||(n.state.value[e]=s?s():{});const u=dc(n.state.value[e]);return bt(u,r,Object.keys(i||{}).reduce((h,d)=>(h[d]=No(Ge(()=>{Bo(n);const g=n._s.get(e);return i[d].call(g,g)})),h),{}))}return a=Ml(e,c,t,n,o,!0),a}function Ml(e,t,n={},o,s,r){let i;const l=bt({actions:{}},n),a={deep:!0};let c,u,h=[],d=[],g;const m=o.state.value[e];!r&&!m&&(o.state.value[e]={}),we({});let b;function E(D){let z;c=u=!1,typeof D=="function"?(D(o.state.value[e]),z={type:Ln.patchFunction,storeId:e,events:g}):(Cs(o.state.value[e],D),z={type:Ln.patchObject,payload:D,storeId:e,events:g});const Z=b=Symbol();_n().then(()=>{b===Z&&(c=!0)}),u=!0,tn(h,z,o.state.value[e])}const P=r?function(){const{state:z}=n,Z=z?z():{};this.$patch(re=>{bt(re,Z)})}:Al;function S(){i.stop(),h=[],d=[],o._s.delete(e)}function L(D,z){return function(){Bo(o);const Z=Array.from(arguments),re=[],ge=[];function Ve(X){re.push(X)}function Lt(X){ge.push(X)}tn(d,{args:Z,name:D,store:O,after:Ve,onError:Lt});let He;try{He=z.apply(this&&this.$id===e?this:O,Z)}catch(X){throw tn(ge,X),X}return He instanceof Promise?He.then(X=>(tn(re,X),X)).catch(X=>(tn(ge,X),Promise.reject(X))):(tn(re,He),He)}}const V={_p:o,$id:e,$onAction:Yr.bind(null,d),$patch:E,$reset:P,$subscribe(D,z={}){const Z=Yr(h,D,z.detached,()=>re()),re=i.run(()=>Ht(()=>o.state.value[e],ge=>{(z.flush==="sync"?u:c)&&D({storeId:e,type:Ln.direct,events:g},ge)},bt({},a,z)));return Z},$dispose:S},O=Tt(V);o._s.set(e,O);const W=(o._a&&o._a.runWithContext||tf)(()=>o._e.run(()=>(i=Oi()).run(t)));for(const D in W){const z=W[D];if(fe(z)&&!sf(z)||xt(z))r||(m&&of(z)&&(fe(z)?z.value=m[D]:Cs(z,m[D])),o.state.value[e][D]=z);else if(typeof z=="function"){const Z=L(D,z);W[D]=Z,l.actions[D]=z}}return bt(O,W),bt(J(O),W),Object.defineProperty(O,"$state",{get:()=>o.state.value[e],set:D=>{E(z=>{bt(z,D)})}}),o._p.forEach(D=>{bt(O,i.run(()=>D({store:O,app:o._a,pinia:o,options:l})))}),m&&r&&n.hydrate&&n.hydrate(O.$state,m),c=!0,u=!0,O}function Rl(e,t,n){let o,s;const r=typeof t=="function";typeof e=="string"?(o=e,s=r?n:t):(s=e,o=e.id);function i(l,a){const c=Jc();return l=l||(c?rt(xl,null):null),l&&Bo(l),l=Pl,l._s.has(o)||(r?Ml(o,t,s,l):rf(o,s,l)),l._s.get(o)}return i.$id=o,i}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const nn=typeof document<"u";function lf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ne=Object.assign;function ns(e,t){const n={};for(const o in t){const s=t[o];n[o]=Je(s)?s.map(e):e(s)}return n}const Nn=()=>{},Je=Array.isArray,Tl=/#/g,af=/&/g,cf=/\//g,uf=/=/g,ff=/\?/g,Il=/\+/g,df=/%5B/g,hf=/%5D/g,Ol=/%5E/g,pf=/%60/g,Ll=/%7B/g,gf=/%7C/g,Nl=/%7D/g,mf=/%20/g;function Zs(e){return encodeURI(""+e).replace(gf,"|").replace(df,"[").replace(hf,"]")}function _f(e){return Zs(e).replace(Ll,"{").replace(Nl,"}").replace(Ol,"^")}function Es(e){return Zs(e).replace(Il,"%2B").replace(mf,"+").replace(Tl,"%23").replace(af,"%26").replace(pf,"`").replace(Ll,"{").replace(Nl,"}").replace(Ol,"^")}function bf(e){return Es(e).replace(uf,"%3D")}function vf(e){return Zs(e).replace(Tl,"%23").replace(ff,"%3F")}function yf(e){return e==null?"":vf(e).replace(cf,"%2F")}function Vn(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const wf=/\/$/,Sf=e=>e.replace(wf,"");function os(e,t,n="/"){let o,s={},r="",i="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(o=t.slice(0,a),r=t.slice(a+1,l>-1?l:t.length),s=e(r)),l>-1&&(o=o||t.slice(0,l),i=t.slice(l,t.length)),o=Pf(o!=null?o:t,n),{fullPath:o+(r&&"?")+r+i,path:o,query:s,hash:Vn(i)}}function Cf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Jr(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ef(e,t,n){const o=t.matched.length-1,s=n.matched.length-1;return o>-1&&o===s&&pn(t.matched[o],n.matched[s])&&$l(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function pn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function $l(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!kf(e[n],t[n]))return!1;return!0}function kf(e,t){return Je(e)?Zr(e,t):Je(t)?Zr(t,e):e===t}function Zr(e,t){return Je(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function Pf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),s=o[o.length-1];(s===".."||s===".")&&o.push("");let r=n.length-1,i,l;for(i=0;i<o.length;i++)if(l=o[i],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(i).join("/")}var Hn;(function(e){e.pop="pop",e.push="push"})(Hn||(Hn={}));var $n;(function(e){e.back="back",e.forward="forward",e.unknown=""})($n||($n={}));function xf(e){if(!e)if(nn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Sf(e)}const Af=/^[^#]+#/;function Mf(e,t){return e.replace(Af,"#")+t}function Rf(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const Go=()=>({left:window.scrollX,top:window.scrollY});function Tf(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Rf(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Xr(e,t){return(history.state?history.state.position-t:-1)+e}const ks=new Map;function If(e,t){ks.set(e,t)}function Of(e){const t=ks.get(e);return ks.delete(e),t}let Lf=()=>location.protocol+"//"+location.host;function Dl(e,t){const{pathname:n,search:o,hash:s}=t,r=e.indexOf("#");if(r>-1){let l=s.includes(e.slice(r))?e.slice(r).length:1,a=s.slice(l);return a[0]!=="/"&&(a="/"+a),Jr(a,"")}return Jr(n,e)+o+s}function Nf(e,t,n,o){let s=[],r=[],i=null;const l=({state:d})=>{const g=Dl(e,location),m=n.value,b=t.value;let E=0;if(d){if(n.value=g,t.value=d,i&&i===m){i=null;return}E=b?d.position-b.position:0}else o(g);s.forEach(P=>{P(n.value,m,{delta:E,type:Hn.pop,direction:E?E>0?$n.forward:$n.back:$n.unknown})})};function a(){i=n.value}function c(d){s.push(d);const g=()=>{const m=s.indexOf(d);m>-1&&s.splice(m,1)};return r.push(g),g}function u(){const{history:d}=window;!d.state||d.replaceState(ne({},d.state,{scroll:Go()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:a,listen:c,destroy:h}}function ei(e,t,n,o=!1,s=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:s?Go():null}}function $f(e){const{history:t,location:n}=window,o={value:Dl(e,n)},s={value:t.state};s.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(a,c,u){const h=e.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+a:Lf()+e+a;try{t[u?"replaceState":"pushState"](c,"",d),s.value=c}catch(g){console.error(g),n[u?"replace":"assign"](d)}}function i(a,c){const u=ne({},t.state,ei(s.value.back,a,s.value.forward,!0),c,{position:s.value.position});r(a,u,!0),o.value=a}function l(a,c){const u=ne({},s.value,t.state,{forward:a,scroll:Go()});r(u.current,u,!0);const h=ne({},ei(o.value,a,null),{position:u.position+1},c);r(a,h,!1),o.value=a}return{location:o,state:s,push:l,replace:i}}function Df(e){e=xf(e);const t=$f(e),n=Nf(e,t.state,t.location,t.replace);function o(r,i=!0){i||n.pauseListeners(),history.go(r)}const s=ne({location:"",base:e,go:o,createHref:Mf.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function jf(e){return typeof e=="string"||e&&typeof e=="object"}function jl(e){return typeof e=="string"||typeof e=="symbol"}const gt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Fl=Symbol("");var ti;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(ti||(ti={}));function gn(e,t){return ne(new Error,{type:e,[Fl]:!0},t)}function at(e,t){return e instanceof Error&&Fl in e&&(t==null||!!(e.type&t))}const ni="[^/]+?",Ff={sensitive:!1,strict:!1,start:!0,end:!0},Kf=/[.+*?^${}()[\]/\\]/g;function qf(e,t){const n=ne({},Ff,t),o=[];let s=n.start?"^":"";const r=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const d=c[h];let g=40+(n.sensitive?.25:0);if(d.type===0)h||(s+="/"),s+=d.value.replace(Kf,"\\$&"),g+=40;else if(d.type===1){const{value:m,repeatable:b,optional:E,regexp:P}=d;r.push({name:m,repeatable:b,optional:E});const S=P||ni;if(S!==ni){g+=10;try{new RegExp(`(${S})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${m}" (${S}): `+V.message)}}let L=b?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;h||(L=E&&c.length<2?`(?:/${L})`:"/"+L),E&&(L+="?"),s+=L,g+=20,E&&(g+=-8),b&&(g+=-20),S===".*"&&(g+=-50)}u.push(g)}o.push(u)}if(n.strict&&n.end){const c=o.length-1;o[c][o[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function l(c){const u=c.match(i),h={};if(!u)return null;for(let d=1;d<u.length;d++){const g=u[d]||"",m=r[d-1];h[m.name]=g&&m.repeatable?g.split("/"):g}return h}function a(c){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of d)if(g.type===0)u+=g.value;else if(g.type===1){const{value:m,repeatable:b,optional:E}=g,P=m in c?c[m]:"";if(Je(P)&&!b)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const S=Je(P)?P.join("/"):P;if(!S)if(E)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=S}}return u||"/"}return{re:i,score:o,keys:r,parse:l,stringify:a}}function Vf(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Hf(e,t){let n=0;const o=e.score,s=t.score;for(;n<o.length&&n<s.length;){const r=Vf(o[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-o.length)===1){if(oi(o))return 1;if(oi(s))return-1}return s.length-o.length}function oi(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Uf={type:0,value:""},Bf=/[a-zA-Z0-9_]/;function Gf(e){if(!e)return[[]];if(e==="/")return[[Uf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,o=n;const s=[];let r;function i(){r&&s.push(r),r=[]}let l=0,a,c="",u="";function h(){!c||(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:a==="/"?(c&&h(),i()):a===":"?(h(),n=1):d();break;case 4:d(),n=o;break;case 1:a==="("?n=2:Bf.test(a)?d():(h(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),i(),s}function Wf(e,t,n){const o=qf(Gf(e.path),n),s=ne(o,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function zf(e,t){const n=[],o=new Map;t=ii({strict:!1,end:!0,sensitive:!1},t);function s(u){return o.get(u)}function r(u,h,d){const g=!d,m=Qf(u);m.aliasOf=d&&d.record;const b=ii(t,u),E=[m];if("alias"in u){const L=typeof u.alias=="string"?[u.alias]:u.alias;for(const V of L)E.push(ne({},m,{components:d?d.record.components:m.components,path:V,aliasOf:d?d.record:m}))}let P,S;for(const L of E){const{path:V}=L;if(h&&V[0]!=="/"){const O=h.record.path,M=O[O.length-1]==="/"?"":"/";L.path=h.record.path+(V&&M+V)}if(P=Wf(L,h,b),d?d.alias.push(P):(S=S||P,S!==P&&S.alias.push(P),g&&u.name&&!ri(P)&&i(u.name)),m.children){const O=m.children;for(let M=0;M<O.length;M++)r(O[M],P,d&&d.children[M])}d=d||P,(P.record.components&&Object.keys(P.record.components).length||P.record.name||P.record.redirect)&&a(P)}return S?()=>{i(S)}:Nn}function i(u){if(jl(u)){const h=o.get(u);h&&(o.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(i),h.alias.forEach(i))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&o.delete(u.record.name),u.children.forEach(i),u.alias.forEach(i))}}function l(){return n}function a(u){let h=0;for(;h<n.length&&Hf(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Kl(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!ri(u)&&o.set(u.record.name,u)}function c(u,h){let d,g={},m,b;if("name"in u&&u.name){if(d=o.get(u.name),!d)throw gn(1,{location:u});b=d.record.name,g=ne(si(h.params,d.keys.filter(S=>!S.optional).concat(d.parent?d.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),u.params&&si(u.params,d.keys.map(S=>S.name))),m=d.stringify(g)}else if(u.path!=null)m=u.path,d=n.find(S=>S.re.test(m)),d&&(g=d.parse(m),b=d.record.name);else{if(d=h.name?o.get(h.name):n.find(S=>S.re.test(h.path)),!d)throw gn(1,{location:u,currentLocation:h});b=d.record.name,g=ne({},h.params,u.params),m=d.stringify(g)}const E=[];let P=d;for(;P;)E.unshift(P.record),P=P.parent;return{name:b,path:m,params:g,matched:E,meta:Jf(E)}}return e.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:i,getRoutes:l,getRecordMatcher:s}}function si(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function Qf(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Yf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Yf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function ri(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Jf(e){return e.reduce((t,n)=>ne(t,n.meta),{})}function ii(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function Kl(e,t){return t.children.some(n=>n===e||Kl(e,n))}function Zf(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<o.length;++s){const r=o[s].replace(Il," "),i=r.indexOf("="),l=Vn(i<0?r:r.slice(0,i)),a=i<0?null:Vn(r.slice(i+1));if(l in t){let c=t[l];Je(c)||(c=t[l]=[c]),c.push(a)}else t[l]=a}return t}function li(e){let t="";for(let n in e){const o=e[n];if(n=bf(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(Je(o)?o.map(r=>r&&Es(r)):[o&&Es(o)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Xf(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=Je(o)?o.map(s=>s==null?null:""+s):o==null?o:""+o)}return t}const ed=Symbol(""),ai=Symbol(""),Xs=Symbol(""),ql=Symbol(""),Ps=Symbol("");function Cn(){let e=[];function t(o){return e.push(o),()=>{const s=e.indexOf(o);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Et(e,t,n,o,s,r=i=>i()){const i=o&&(o.enterCallbacks[s]=o.enterCallbacks[s]||[]);return()=>new Promise((l,a)=>{const c=d=>{d===!1?a(gn(4,{from:n,to:t})):d instanceof Error?a(d):jf(d)?a(gn(2,{from:t,to:d})):(i&&o.enterCallbacks[s]===i&&typeof d=="function"&&i.push(d),l())},u=r(()=>e.call(o&&o.instances[s],t,n,c));let h=Promise.resolve(u);e.length<3&&(h=h.then(c)),h.catch(d=>a(d))})}function ss(e,t,n,o,s=r=>r()){const r=[];for(const i of e)for(const l in i.components){let a=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(td(a)){const u=(a.__vccOpts||a)[t];u&&r.push(Et(u,n,o,i,l,s))}else{let c=a();r.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${i.path}"`));const h=lf(u)?u.default:u;i.components[l]=h;const g=(h.__vccOpts||h)[t];return g&&Et(g,n,o,i,l,s)()}))}}return r}function td(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function ci(e){const t=rt(Xs),n=rt(ql),o=Ge(()=>t.resolve(st(e.to))),s=Ge(()=>{const{matched:a}=o.value,{length:c}=a,u=a[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(pn.bind(null,u));if(d>-1)return d;const g=ui(a[c-2]);return c>1&&ui(u)===g&&h[h.length-1].path!==g?h.findIndex(pn.bind(null,a[c-2])):d}),r=Ge(()=>s.value>-1&&rd(n.params,o.value.params)),i=Ge(()=>s.value>-1&&s.value===n.matched.length-1&&$l(n.params,o.value.params));function l(a={}){return sd(a)?t[st(e.replace)?"replace":"push"](st(e.to)).catch(Nn):Promise.resolve()}return{route:o,href:Ge(()=>o.value.href),isActive:r,isExactActive:i,navigate:l}}const nd=Fo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ci,setup(e,{slots:t}){const n=Tt(ci(e)),{options:o}=rt(Xs),s=Ge(()=>({[fi(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[fi(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:kl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),od=nd;function sd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rd(e,t){for(const n in t){const o=t[n],s=e[n];if(typeof o=="string"){if(o!==s)return!1}else if(!Je(s)||s.length!==o.length||o.some((r,i)=>r!==s[i]))return!1}return!0}function ui(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const fi=(e,t,n)=>e!=null?e:t!=null?t:n,id=Fo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=rt(Ps),s=Ge(()=>e.route||o.value),r=rt(ai,0),i=Ge(()=>{let c=st(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),l=Ge(()=>s.value.matched[i.value]);fo(ai,Ge(()=>i.value+1)),fo(ed,l),fo(Ps,s);const a=we();return Ht(()=>[a.value,l.value,e.name],([c,u,h],[d,g,m])=>{u&&(u.instances[h]=c,g&&g!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!pn(u,g)||!d)&&(u.enterCallbacks[h]||[]).forEach(b=>b(c))},{flush:"post"}),()=>{const c=s.value,u=e.name,h=l.value,d=h&&h.components[u];if(!d)return di(n.default,{Component:d,route:c});const g=h.props[u],m=g?g===!0?c.params:typeof g=="function"?g(c):g:null,E=kl(d,ne({},m,t,{onVnodeUnmounted:P=>{P.component.isUnmounted&&(h.instances[u]=null)},ref:a}));return di(n.default,{Component:E,route:c})||E}}});function di(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Vl=id;function ld(e){const t=zf(e.routes,e),n=e.parseQuery||Zf,o=e.stringifyQuery||li,s=e.history,r=Cn(),i=Cn(),l=Cn(),a=cc(gt);let c=gt;nn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ns.bind(null,y=>""+y),h=ns.bind(null,yf),d=ns.bind(null,Vn);function g(y,N){let T,j;return jl(y)?(T=t.getRecordMatcher(y),j=N):j=y,t.addRoute(j,T)}function m(y){const N=t.getRecordMatcher(y);N&&t.removeRoute(N)}function b(){return t.getRoutes().map(y=>y.record)}function E(y){return!!t.getRecordMatcher(y)}function P(y,N){if(N=ne({},N||a.value),typeof y=="string"){const p=os(n,y,N.path),_=t.resolve({path:p.path},N),w=s.createHref(p.fullPath);return ne(p,_,{params:d(_.params),hash:Vn(p.hash),redirectedFrom:void 0,href:w})}let T;if(y.path!=null)T=ne({},y,{path:os(n,y.path,N.path).path});else{const p=ne({},y.params);for(const _ in p)p[_]==null&&delete p[_];T=ne({},y,{params:h(p)}),N.params=h(N.params)}const j=t.resolve(T,N),te=y.hash||"";j.params=u(d(j.params));const ae=Cf(o,ne({},y,{hash:_f(te),path:j.path})),f=s.createHref(ae);return ne({fullPath:ae,hash:te,query:o===li?Xf(y.query):y.query||{}},j,{redirectedFrom:void 0,href:f})}function S(y){return typeof y=="string"?os(n,y,a.value.path):ne({},y)}function L(y,N){if(c!==y)return gn(8,{from:N,to:y})}function V(y){return W(y)}function O(y){return V(ne(S(y),{replace:!0}))}function M(y){const N=y.matched[y.matched.length-1];if(N&&N.redirect){const{redirect:T}=N;let j=typeof T=="function"?T(y):T;return typeof j=="string"&&(j=j.includes("?")||j.includes("#")?j=S(j):{path:j},j.params={}),ne({query:y.query,hash:y.hash,params:j.path!=null?{}:y.params},j)}}function W(y,N){const T=c=P(y),j=a.value,te=y.state,ae=y.force,f=y.replace===!0,p=M(T);if(p)return W(ne(S(p),{state:typeof p=="object"?ne({},te,p.state):te,force:ae,replace:f}),N||T);const _=T;_.redirectedFrom=N;let w;return!ae&&Ef(o,j,T)&&(w=gn(16,{to:_,from:j}),Ze(j,j,!0,!1)),(w?Promise.resolve(w):Z(_,j)).catch(v=>at(v)?at(v,2)?v:ht(v):ee(v,_,j)).then(v=>{if(v){if(at(v,2))return W(ne({replace:f},S(v.to),{state:typeof v.to=="object"?ne({},te,v.to.state):te,force:ae}),N||_)}else v=ge(_,j,!0,f,te);return re(_,j,v),v})}function D(y,N){const T=L(y,N);return T?Promise.reject(T):Promise.resolve()}function z(y){const N=Xt.values().next().value;return N&&typeof N.runWithContext=="function"?N.runWithContext(y):y()}function Z(y,N){let T;const[j,te,ae]=ad(y,N);T=ss(j.reverse(),"beforeRouteLeave",y,N);for(const p of j)p.leaveGuards.forEach(_=>{T.push(Et(_,y,N))});const f=D.bind(null,y,N);return T.push(f),Ce(T).then(()=>{T=[];for(const p of r.list())T.push(Et(p,y,N));return T.push(f),Ce(T)}).then(()=>{T=ss(te,"beforeRouteUpdate",y,N);for(const p of te)p.updateGuards.forEach(_=>{T.push(Et(_,y,N))});return T.push(f),Ce(T)}).then(()=>{T=[];for(const p of ae)if(p.beforeEnter)if(Je(p.beforeEnter))for(const _ of p.beforeEnter)T.push(Et(_,y,N));else T.push(Et(p.beforeEnter,y,N));return T.push(f),Ce(T)}).then(()=>(y.matched.forEach(p=>p.enterCallbacks={}),T=ss(ae,"beforeRouteEnter",y,N,z),T.push(f),Ce(T))).then(()=>{T=[];for(const p of i.list())T.push(Et(p,y,N));return T.push(f),Ce(T)}).catch(p=>at(p,8)?p:Promise.reject(p))}function re(y,N,T){l.list().forEach(j=>z(()=>j(y,N,T)))}function ge(y,N,T,j,te){const ae=L(y,N);if(ae)return ae;const f=N===gt,p=nn?history.state:{};T&&(j||f?s.replace(y.fullPath,ne({scroll:f&&p&&p.scroll},te)):s.push(y.fullPath,te)),a.value=y,Ze(y,N,T,f),ht()}let Ve;function Lt(){Ve||(Ve=s.listen((y,N,T)=>{if(!Xn.listening)return;const j=P(y),te=M(j);if(te){W(ne(te,{replace:!0}),j).catch(Nn);return}c=j;const ae=a.value;nn&&If(Xr(ae.fullPath,T.delta),Go()),Z(j,ae).catch(f=>at(f,12)?f:at(f,2)?(W(f.to,j).then(p=>{at(p,20)&&!T.delta&&T.type===Hn.pop&&s.go(-1,!1)}).catch(Nn),Promise.reject()):(T.delta&&s.go(-T.delta,!1),ee(f,j,ae))).then(f=>{f=f||ge(j,ae,!1),f&&(T.delta&&!at(f,8)?s.go(-T.delta,!1):T.type===Hn.pop&&at(f,20)&&s.go(-1,!1)),re(j,ae,f)}).catch(Nn)}))}let He=Cn(),X=Cn(),oe;function ee(y,N,T){ht(y);const j=X.list();return j.length?j.forEach(te=>te(y,N,T)):console.error(y),Promise.reject(y)}function lt(){return oe&&a.value!==gt?Promise.resolve():new Promise((y,N)=>{He.add([y,N])})}function ht(y){return oe||(oe=!y,Lt(),He.list().forEach(([N,T])=>y?T(y):N()),He.reset()),y}function Ze(y,N,T,j){const{scrollBehavior:te}=e;if(!nn||!te)return Promise.resolve();const ae=!T&&Of(Xr(y.fullPath,0))||(j||!T)&&history.state&&history.state.scroll||null;return _n().then(()=>te(y,N,ae)).then(f=>f&&Tf(f)).catch(f=>ee(f,y,N))}const Te=y=>s.go(y);let Zt;const Xt=new Set,Xn={currentRoute:a,listening:!0,addRoute:g,removeRoute:m,hasRoute:E,getRoutes:b,resolve:P,options:e,push:V,replace:O,go:Te,back:()=>Te(-1),forward:()=>Te(1),beforeEach:r.add,beforeResolve:i.add,afterEach:l.add,onError:X.add,isReady:lt,install(y){const N=this;y.component("RouterLink",od),y.component("RouterView",Vl),y.config.globalProperties.$router=N,Object.defineProperty(y.config.globalProperties,"$route",{enumerable:!0,get:()=>st(a)}),nn&&!Zt&&a.value===gt&&(Zt=!0,V(s.location).catch(te=>{}));const T={};for(const te in gt)Object.defineProperty(T,te,{get:()=>a.value[te],enumerable:!0});y.provide(Xs,N),y.provide(ql,Gi(T)),y.provide(Ps,a);const j=y.unmount;Xt.add(y),y.unmount=function(){Xt.delete(y),Xt.size<1&&(c=gt,Ve&&Ve(),Ve=null,a.value=gt,Zt=!1,oe=!1),j()}}};function Ce(y){return y.reduce((N,T)=>N.then(()=>z(T)),Promise.resolve())}return Xn}function ad(e,t){const n=[],o=[],s=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const l=t.matched[i];l&&(e.matched.find(c=>pn(c,l))?o.push(l):n.push(l));const a=e.matched[i];a&&(t.matched.find(c=>pn(c,a))||s.push(a))}return[n,o,s]}const bn=Rl("tokens",{state:()=>({user_id:null,token:null,isAuthenticated:!1}),actions:{setUserID(e){this.user_id=e},setToken(e){this.token=e,this.isAuthenticated=!0},removeToken(){this.token=null,this.isAuthenticated=!1}}});const vn=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n},cd={name:"NAVHeader",setup(){return{store:bn()}}},ud={class:"navbar"},fd={class:"nav-links"},dd={class:"nav-item"},hd={class:"nav-item"},pd={class:"nav-item"},gd={class:"nav-item"};function md(e,t,n,o,s,r){const i=kc("router-link");return he(),Me("nav",ud,[R("ul",fd,[R("li",dd,[R("a",null,[ve(i,{class:"logIn",to:"/log-in"},{default:xn(()=>[on("Home")]),_:1})])]),R("li",hd,[R("a",null,[ve(i,{class:"signUp",to:"/sign-up"},{default:xn(()=>[on("Sign Up")]),_:1})])]),R("li",pd,[R("a",null,[o.store.isAuthenticated?(he(),wo(i,{key:0,class:"logOut","data-cy":"logOutLink",to:"/log-out"},{default:xn(()=>[on("Log Out")]),_:1})):hn("",!0)])]),R("li",gd,[R("a",null,[o.store.isAuthenticated?(he(),wo(i,{key:0,class:"createGame",to:"/creategame"},{default:xn(()=>[on("Create Game")]),_:1})):hn("",!0)])])])])}const _d=vn(cd,[["render",md],["__scopeId","data-v-7a4d3214"]]),bd={__name:"App",setup(e){return(t,n)=>(he(),Me(Ke,null,[R("header",null,[ve(_d)]),ve(st(Vl))],64))}};const vd={name:"LogIn",setup(){const e=we(""),t=we(""),n=we("");return{username:e,password:t,errorMessage:n,logIn:async()=>{const s={password:t.value,username:e.value},r=bn(),i="psi4-django.onrender.com/";try{const l=await fetch(window.location.protocol+"//"+i+"api/v1/mytokenlogin/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}),a=await l.json();if(!l.ok){n.value="Error: Invalid username or password";return}a&&a.auth_token?(r.setToken(a.auth_token),r.setUserID(a.user_id),yn.push("/creategame")):n.value="Error: Authentication token not found"}catch(l){n.value=`Error: ${l.message}`}}}}},Wo=e=>(Qn("data-v-42218e98"),e=e(),Yn(),e),yd=Wo(()=>R("header",null,null,-1)),wd={class:"container"},Sd=Wo(()=>R("div",{class:"content-left"},[R("h3",null,[on("Welcome to MyChess "),R("br"),R("span",null,"Yet another chess website")]),R("p",null,"Lorem ipsum dolor sit amet, qui minim labore adipisicing minim sint cillum sint consectetur cupidatat. ")],-1)),Cd={class:"content-right"},Ed=Wo(()=>R("h1",null,"MyChess Log In",-1)),kd={class:"input-boxes"},Pd={class:"input-box"},xd={class:"input-box"},Ad=Wo(()=>R("button",{type:"submit",class:"btn","data-cy":"login-button"},"Log In",-1)),Md={key:0,class:"error-message","data-cy":"error-message"};function Rd(e,t,n,o,s,r){return he(),Me(Ke,null,[yd,R("div",wd,[Sd,R("div",Cd,[R("form",{class:"log-in-form",onSubmit:t[2]||(t[2]=Js((...i)=>o.logIn&&o.logIn(...i),["prevent"]))},[Ed,R("div",kd,[R("div",Pd,[an(R("input",{type:"text",placeholder:"Email Address",id:"username","data-cy":"username","onUpdate:modelValue":t[0]||(t[0]=i=>o.username=i),required:""},null,512),[[On,o.username]])]),R("div",xd,[an(R("input",{type:"password",placeholder:"Password",id:"password","data-cy":"password","onUpdate:modelValue":t[1]||(t[1]=i=>o.password=i),required:""},null,512),[[On,o.password]])])]),Ad,o.errorMessage?(he(),Me("div",Md,yt(o.errorMessage),1)):hn("",!0)],32)])])],64)}const hi=vn(vd,[["render",Rd],["__scopeId","data-v-42218e98"]]);const Td={name:"SignUp",setup(){const e=we(""),t=we(""),n=we("");return{emailAddress:e,password:t,confirmPassword:n,signUp:async()=>{if(t.value!=n.value){alert("Passwords do not match");return}const s={email:e.value,username:e.value,password:t.value},r="psi4-django.onrender.com/";try{const i=await fetch(window.location.protocol+"//"+r+"api/v1/users/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}),l=await i.json();if(!i.ok)throw l.username?new Error(l.username):new Error("Sign up unsuccesfull");alert("Sign up succesfull! redirecting to log in"),yn.push("/log-in")}catch(i){alert(i)}}}}},Hl=e=>(Qn("data-v-fc6c4439"),e=e(),Yn(),e),Id={class:"container"},Od={class:"wrapper"},Ld=Hl(()=>R("h1",null,"Mychess Sign Up",-1)),Nd={class:"input-boxes"},$d={class:"input-box"},Dd={class:"input-box"},jd={class:"input-box"},Fd=Hl(()=>R("button",{type:"submit",class:"btn","data-cy":"signup-button"},"Sign Up",-1));function Kd(e,t,n,o,s,r){return he(),Me("div",Id,[R("div",Od,[R("form",{class:"sign-up-form",onSubmit:t[3]||(t[3]=Js((...i)=>o.signUp&&o.signUp(...i),["prevent"]))},[Ld,R("div",Nd,[R("div",$d,[an(R("input",{type:"text",placeholder:"Email Address",id:"emailAddress","data-cy":"username","onUpdate:modelValue":t[0]||(t[0]=i=>o.emailAddress=i),required:""},null,512),[[On,o.emailAddress]])]),R("div",Dd,[an(R("input",{type:"password",placeholder:"Password",id:"password","data-cy":"password1","onUpdate:modelValue":t[1]||(t[1]=i=>o.password=i),required:""},null,512),[[On,o.password]])]),R("div",jd,[an(R("input",{type:"password",placeholder:"Confirm Password",id:"confirmPassword","data-cy":"password2","onUpdate:modelValue":t[2]||(t[2]=i=>o.confirmPassword=i),required:""},null,512),[[On,o.confirmPassword]])])]),Fd],32)])])}const qd=vn(Td,[["render",Kd],["__scopeId","data-v-fc6c4439"]]),Ul=Rl("games",{state:()=>({game_id:null,player_color:null}),actions:{setGameID(e){this.game_id=e},setPlayerColor(e){this.player_color=e},removeGame(){this.game_id=null,this.player_color=null}}});const Vd={name:"CreateGame",setup(){const e=we(!1),t=we(""),n=we("");return Ht(t,s=>{e.value=s==="Join specific game"}),{createGame:async()=>{const s=bn(),r=Ul(),i="psi4-django.onrender.com/";if(s.token===null){n.value="Error: Cannot create game";return}try{const l=await fetch(window.location.protocol+"//"+i+"api/v1/games/",{method:"POST",headers:{Authorization:"Token "+s.token,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({user_id:s.user_id})}),a=await l.json();if(l.status!==201&&l.status!==200)throw new Error(a.detail||"Failed to create a game or join an existing one");r.setGameID(a.id),r.setPlayerColor(a.whitePlayer===s.user_id?"white":"black"),l.status===201?alert("Game created with ID: "+r.game_id+" playing as "+r.player_color):alert("Joined to existing as "+r.player_color+" to a game with ID: "+r.game_id),yn.push("/play")}catch(l){n.value=l.message}},isGameIdVisible:e,selectedGameType:t,errorMessage:n}}},Qt=e=>(Qn("data-v-1987eab6"),e=e(),Yn(),e),Hd={class:"container"},Ud={class:"wrapper"},Bd=Qt(()=>R("h1",null,"Create a chess game!",-1)),Gd=Qt(()=>R("option",{hidden:""},"Select a game type",-1)),Wd=Qt(()=>R("option",{value:"game_join_any"},"Join any game",-1)),zd=Qt(()=>R("option",{value:"Join specific game"},"Join specific game (gameID required)",-1)),Qd=[Gd,Wd,zd],Yd=Qt(()=>R("button",{type:"submit",class:"btn","data-cy":"createGame-button"},"Join!",-1)),Jd={key:0,"data-cy":"gameID"},Zd=Qt(()=>R("label",{for:"game-id"},"Enter gameID:",-1)),Xd=Qt(()=>R("input",{id:"game-id",type:"number"},null,-1)),eh=[Zd,Xd],th={key:1,class:"error-message","data-cy":"error-message"};function nh(e,t,n,o,s,r){return he(),Me("div",Hd,[R("div",Ud,[R("form",{class:"create-game-box",onSubmit:t[1]||(t[1]=Js((...i)=>o.createGame&&o.createGame(...i),["prevent"]))},[Bd,an(R("select",{name:"game-selection","onUpdate:modelValue":t[0]||(t[0]=i=>o.selectedGameType=i),id:"selectGame","data-cy":"selectGame"},Qd,512),[[Bu,o.selectedGameType]]),Yd,o.isGameIdVisible?(he(),Me("div",Jd,eh)):hn("",!0),o.errorMessage?(he(),Me("div",th,yt(o.errorMessage),1)):hn("",!0)],32)])])}const oh=vn(Vd,[["render",nh],["__scopeId","data-v-1987eab6"]]);const sh={name:"LogOut",setup(){const e=async()=>{const t="psi4-django.onrender.com/",n=bn();try{if((await fetch(window.location.protocol+"//"+t+"api/v1/token/logout/",{method:"POST",headers:{Authorization:"token "+n.token,Accept:"application/json","Content-Type":"application/json"}})).status===204)n.removeToken(),setTimeout(()=>yn.push("/log-in"),5e3);else throw new Error("Failed to log out")}catch(o){alert(o)}};return cl(e),{logOut:e}}},rh=e=>(Qn("data-v-010e2ef6"),e=e(),Yn(),e),ih={class:"container","data-cy":"logoutPage"},lh=rh(()=>R("div",{class:"wrapper"},[R("div",{class:"log-out-text"},[R("h2",null,"You have successfully logged out of MyChess."),R("p",null,"Log Out successful. You will be redirected to the main page in 5 seconds.")])],-1)),ah=[lh];function ch(e,t,n,o,s,r){return he(),Me("div",ih,ah)}const uh=vn(sh,[["render",ch],["__scopeId","data-v-010e2ef6"]]),fh={class:"promotion-dialog",open:""},dh=["aria-label","onClick","onTouchstartPassive"],hh=Fo({__name:"PromotionDialog",props:{state:{}},emits:["promotionSelected"],setup(e,{emit:t}){const n=e,o=[{name:"Queen",data:"q"},{name:"Knight",data:"n"},{name:"Rook",data:"r"},{name:"Bishop",data:"b"}];function s(r){var i,l;(l=(i=n.state).callback)==null||l.call(i,r.data),t("promotionSelected")}return(r,i)=>(he(),Me("dialog",fh,[(he(),Me(Ke,null,fl(o,l=>R("button",{key:l.name,type:"button",class:zn([l.name.toLowerCase(),r.state.color]),"aria-label":l.name,onClick:a=>s(l),onTouchstartPassive:a=>s(l)},null,42,dh)),64))]))}});/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ke="w",Ue="b",_e="p",xs="n",go="b",Mn="r",kt="q",be="k",rs="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",De=-1,ph={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},gh=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],H={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},B={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},is={b:[16,32,17,15],w:[-16,-32,-17,-15]},pi={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},mh=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],_h=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],bh={p:1,n:2,b:4,r:8,q:16,k:32},vh="pnbrqkPNBRQK",gi=[xs,go,Mn,kt],yh=7,wh=6,Sh=1,Ch=0,io={[be]:H.KSIDE_CASTLE,[kt]:H.QSIDE_CASTLE},mt={w:[{square:B.a1,flag:H.QSIDE_CASTLE},{square:B.h1,flag:H.KSIDE_CASTLE}],b:[{square:B.a8,flag:H.QSIDE_CASTLE},{square:B.h8,flag:H.KSIDE_CASTLE}]},Eh={b:Sh,w:wh},kh=["1-0","0-1","1/2-1/2","*"];function Ut(e){return e>>4}function Un(e){return e&15}function Bl(e){return"0123456789".indexOf(e)!==-1}function je(e){const t=Un(e),n=Ut(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function En(e){return e===ke?Ue:ke}function Ph(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const o=parseInt(t[4],10);if(isNaN(o)||o<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=t[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let i=0;i<s.length;i++){let l=0,a=!1;for(let c=0;c<s[i].length;c++)if(Bl(s[i][c])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(s[i][c],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[i][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const r=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:i,regex:l}of r){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${i} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${i} kings`}}return{ok:!0}}function xh(e,t){const n=e.from,o=e.to,s=e.piece;let r=0,i=0,l=0;for(let a=0,c=t.length;a<c;a++){const u=t[a].from,h=t[a].to,d=t[a].piece;s===d&&n!==u&&o===h&&(r++,Ut(n)===Ut(u)&&i++,Un(n)===Un(u)&&l++)}return r>0?i>0&&l>0?je(n):l>0?je(n).charAt(1):je(n).charAt(0):""}function _t(e,t,n,o,s,r=void 0,i=H.NORMAL){const l=Ut(o);if(s===_e&&(l===yh||l===Ch))for(let a=0;a<gi.length;a++){const c=gi[a];e.push({color:t,from:n,to:o,piece:s,captured:r,promotion:c,flags:i|H.PROMOTION})}else e.push({color:t,from:n,to:o,piece:s,captured:r,flags:i})}function mi(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:_e:(t=t.toLowerCase(),t==="o"?be:t)}function ls(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Ah{constructor(t=rs){Ee(this,"_board",new Array(128));Ee(this,"_turn",ke);Ee(this,"_header",{});Ee(this,"_kings",{w:De,b:De});Ee(this,"_epSquare",-1);Ee(this,"_halfMoves",0);Ee(this,"_moveNumber",0);Ee(this,"_history",[]);Ee(this,"_comments",{});Ee(this,"_castling",{w:0,b:0});this.load(t)}clear(t=!1){this._board=new Array(128),this._kings={w:De,b:De},this._turn=ke,this._castling={w:0,b:0},this._epSquare=De,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._updateSetup(this.fen())}removeHeader(t){t in this._header&&delete this._header[t]}load(t,n=!1){let o=t.split(/\s+/);if(o.length>=2&&o.length<6){const a=["-","-","0","1"];t=o.concat(a.slice(-(6-o.length))).join(" ")}o=t.split(/\s+/);const{ok:s,error:r}=Ph(t);if(!s)throw new Error(r);const i=o[0];let l=0;this.clear(n);for(let a=0;a<i.length;a++){const c=i.charAt(a);if(c==="/")l+=8;else if(Bl(c))l+=parseInt(c,10);else{const u=c<"a"?ke:Ue;this.put({type:c.toLowerCase(),color:u},je(l)),l++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=H.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=H.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=H.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=H.QSIDE_CASTLE),this._epSquare=o[3]==="-"?De:B[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._updateSetup(this.fen())}fen(){var r,i;let t=0,n="";for(let l=B.a8;l<=B.h1;l++){if(this._board[l]){t>0&&(n+=t,t=0);const{color:a,type:c}=this._board[l];n+=a===ke?c.toUpperCase():c.toLowerCase()}else t++;l+1&136&&(t>0&&(n+=t),l!==B.h1&&(n+="/"),t=0,l+=8)}let o="";this._castling[ke]&H.KSIDE_CASTLE&&(o+="K"),this._castling[ke]&H.QSIDE_CASTLE&&(o+="Q"),this._castling[Ue]&H.KSIDE_CASTLE&&(o+="k"),this._castling[Ue]&H.QSIDE_CASTLE&&(o+="q"),o=o||"-";let s="-";if(this._epSquare!==De){const l=this._epSquare+(this._turn===ke?16:-16),a=[l+1,l-1];for(const c of a){if(c&136)continue;const u=this._turn;if(((r=this._board[c])==null?void 0:r.color)===u&&((i=this._board[c])==null?void 0:i.type)===_e){this._makeMove({color:u,from:c,to:this._epSquare,piece:_e,captured:_e,flags:H.EP_CAPTURE});const h=!this._isKingAttacked(u);if(this._undoMove(),h){s=je(this._epSquare);break}}}}return[n,this._turn,o,s,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(t){this._history.length>0||(t!==rs?(this._header.SetUp="1",this._header.FEN=t):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(rs)}get(t){return this._board[B[t]]||!1}put({type:t,color:n},o){if(vh.indexOf(t.toLowerCase())===-1||!(o in B))return!1;const s=B[o];return t==be&&!(this._kings[n]==De||this._kings[n]==s)?!1:(this._board[s]={type:t,color:n},t===be&&(this._kings[n]=s),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(t){const n=this.get(t);return delete this._board[B[t]],n&&n.type===be&&(this._kings[n.color]=De),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var o,s,r,i,l,a,c,u,h,d,g,m;const t=((o=this._board[B.e1])==null?void 0:o.type)===be&&((s=this._board[B.e1])==null?void 0:s.color)===ke,n=((r=this._board[B.e8])==null?void 0:r.type)===be&&((i=this._board[B.e8])==null?void 0:i.color)===Ue;(!t||((l=this._board[B.a1])==null?void 0:l.type)!==Mn||((a=this._board[B.a1])==null?void 0:a.color)!==ke)&&(this._castling.w&=~H.QSIDE_CASTLE),(!t||((c=this._board[B.h1])==null?void 0:c.type)!==Mn||((u=this._board[B.h1])==null?void 0:u.color)!==ke)&&(this._castling.w&=~H.KSIDE_CASTLE),(!n||((h=this._board[B.a8])==null?void 0:h.type)!==Mn||((d=this._board[B.a8])==null?void 0:d.color)!==Ue)&&(this._castling.b&=~H.QSIDE_CASTLE),(!n||((g=this._board[B.h8])==null?void 0:g.type)!==Mn||((m=this._board[B.h8])==null?void 0:m.color)!==Ue)&&(this._castling.b&=~H.KSIDE_CASTLE)}_updateEnPassantSquare(){var r,i;if(this._epSquare===De)return;const t=this._epSquare+(this._turn===ke?-16:16),n=this._epSquare+(this._turn===ke?16:-16),o=[n+1,n-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||((r=this._board[n])==null?void 0:r.color)!==En(this._turn)||((i=this._board[n])==null?void 0:i.type)!==_e){this._epSquare=De;return}const s=l=>{var a,c;return!(l&136)&&((a=this._board[l])==null?void 0:a.color)===this._turn&&((c=this._board[l])==null?void 0:c.type)===_e};o.some(s)||(this._epSquare=De)}_attacked(t,n){for(let o=B.a8;o<=B.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==t)continue;const s=this._board[o],r=o-n;if(r===0)continue;const i=r+119;if(mh[i]&bh[s.type]){if(s.type===_e){if(r>0){if(s.color===ke)return!0}else if(s.color===Ue)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const l=_h[i];let a=o+l,c=!1;for(;a!==n;){if(this._board[a]!=null){c=!0;break}a+=l}if(!c)return!0}}return!1}_isKingAttacked(t){const n=this._kings[t];return n===-1?!1:this._attacked(En(t),n)}isAttacked(t,n){return this._attacked(n,B[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let o=0,s=0;for(let r=B.a8;r<=B.h1;r++){if(s=(s+1)%2,r&136){r+=7;continue}const i=this._board[r];i&&(t[i.type]=i.type in t?t[i.type]+1:1,i.type===go&&n.push(s),o++)}if(o===2||o===3&&(t[go]===1||t[xs]===1))return!0;if(o===t[go]+2){let r=0;const i=n.length;for(let l=0;l<i;l++)r+=n[l];if(r===0||r===i)return!0}return!1}isThreefoldRepetition(){const t=[],n={};let o=!1;for(;;){const s=this._undoMove();if(!s)break;t.push(s)}for(;;){const s=this.fen().split(" ").slice(0,4).join(" ");n[s]=s in n?n[s]+1:1,n[s]>=3&&(o=!0);const r=t.pop();if(r)this._makeMove(r);else break}return o}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:t=!1,square:n=void 0,piece:o=void 0}={}){const s=this._moves({square:n,piece:o});return t?s.map(r=>this._makePretty(r)):s.map(r=>this._moveToSan(r,s))}_moves({legal:t=!0,piece:n=void 0,square:o=void 0}={}){var g;const s=o?o.toLowerCase():void 0,r=n==null?void 0:n.toLowerCase(),i=[],l=this._turn,a=En(l);let c=B.a8,u=B.h1,h=!1;if(s)if(s in B)c=u=B[s],h=!0;else return[];for(let m=c;m<=u;m++){if(m&136){m+=7;continue}if(!this._board[m]||this._board[m].color===a)continue;const{type:b}=this._board[m];let E;if(b===_e){if(r&&r!==b)continue;E=m+is[l][0],this._board[E]||(_t(i,l,m,E,_e),E=m+is[l][1],Eh[l]===Ut(m)&&!this._board[E]&&_t(i,l,m,E,_e,void 0,H.BIG_PAWN));for(let P=2;P<4;P++)E=m+is[l][P],!(E&136)&&(((g=this._board[E])==null?void 0:g.color)===a?_t(i,l,m,E,_e,this._board[E].type,H.CAPTURE):E===this._epSquare&&_t(i,l,m,E,_e,_e,H.EP_CAPTURE))}else{if(r&&r!==b)continue;for(let P=0,S=pi[b].length;P<S;P++){const L=pi[b][P];for(E=m;E+=L,!(E&136);){if(!this._board[E])_t(i,l,m,E,b);else{if(this._board[E].color===l)break;_t(i,l,m,E,b,this._board[E].type,H.CAPTURE);break}if(b===xs||b===be)break}}}}if((r===void 0||r===be)&&(!h||u===this._kings[l])){if(this._castling[l]&H.KSIDE_CASTLE){const m=this._kings[l],b=m+2;!this._board[m+1]&&!this._board[b]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,m+1)&&!this._attacked(a,b)&&_t(i,l,this._kings[l],b,be,void 0,H.KSIDE_CASTLE)}if(this._castling[l]&H.QSIDE_CASTLE){const m=this._kings[l],b=m-2;!this._board[m-1]&&!this._board[m-2]&&!this._board[m-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,m-1)&&!this._attacked(a,b)&&_t(i,l,this._kings[l],b,be,void 0,H.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return i;const d=[];for(let m=0,b=i.length;m<b;m++)this._makeMove(i[m]),this._isKingAttacked(l)||d.push(i[m]),this._undoMove();return d}move(t,{strict:n=!1}={}){let o=null;if(typeof t=="string")o=this._moveFromSan(t,n);else if(typeof t=="object"){const r=this._moves();for(let i=0,l=r.length;i<l;i++)if(t.from===je(r[i].from)&&t.to===je(r[i].to)&&(!("promotion"in r[i])||t.promotion===r[i].promotion)){o=r[i];break}}if(!o)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);const s=this._makePretty(o);return this._makeMove(o),s}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(t){const n=this._turn,o=En(n);if(this._push(t),this._board[t.to]=this._board[t.from],delete this._board[t.from],t.flags&H.EP_CAPTURE&&(this._turn===Ue?delete this._board[t.to-16]:delete this._board[t.to+16]),t.promotion&&(this._board[t.to]={type:t.promotion,color:n}),this._board[t.to].type===be){if(this._kings[n]=t.to,t.flags&H.KSIDE_CASTLE){const s=t.to-1,r=t.to+1;this._board[s]=this._board[r],delete this._board[r]}else if(t.flags&H.QSIDE_CASTLE){const s=t.to+1,r=t.to-2;this._board[s]=this._board[r],delete this._board[r]}this._castling[n]=0}if(this._castling[n]){for(let s=0,r=mt[n].length;s<r;s++)if(t.from===mt[n][s].square&&this._castling[n]&mt[n][s].flag){this._castling[n]^=mt[n][s].flag;break}}if(this._castling[o]){for(let s=0,r=mt[o].length;s<r;s++)if(t.to===mt[o][s].square&&this._castling[o]&mt[o][s].flag){this._castling[o]^=mt[o][s].flag;break}}t.flags&H.BIG_PAWN?n===Ue?this._epSquare=t.to-16:this._epSquare=t.to+16:this._epSquare=De,t.piece===_e?this._halfMoves=0:t.flags&(H.CAPTURE|H.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Ue&&this._moveNumber++,this._turn=o}undo(){const t=this._undoMove();return t?this._makePretty(t):null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;const n=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber;const o=this._turn,s=En(o);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&H.EP_CAPTURE){let r;o===Ue?r=n.to-16:r=n.to+16,this._board[r]={type:_e,color:s}}else this._board[n.to]={type:n.captured,color:s};if(n.flags&(H.KSIDE_CASTLE|H.QSIDE_CASTLE)){let r,i;n.flags&H.KSIDE_CASTLE?(r=n.to+1,i=n.to-1):(r=n.to-2,i=n.to+1),this._board[r]=this._board[i],delete this._board[i]}return n}pgn({newline:t=`
`,maxWidth:n=0}={}){const o=[];let s=!1;for(const d in this._header)o.push("["+d+' "'+this._header[d]+'"]'+t),s=!0;s&&this._history.length&&o.push(t);const r=d=>{const g=this._comments[this.fen()];if(typeof g<"u"){const m=d.length>0?" ":"";d=`${d}${m}{${g}}`}return d},i=[];for(;this._history.length>0;)i.push(this._undoMove());const l=[];let a="";for(i.length===0&&l.push(r(""));i.length>0;){a=r(a);const d=i.pop();if(!d)break;if(!this._history.length&&d.color==="b"){const g=`${this._moveNumber}. ...`;a=a?`${a} ${g}`:g}else d.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(d,this._moves({legal:!0})),this._makeMove(d)}if(a.length&&l.push(r(a)),typeof this._header.Result<"u"&&l.push(this._header.Result),n===0)return o.join("")+l.join(" ");const c=function(){return o.length>0&&o[o.length-1]===" "?(o.pop(),!0):!1},u=function(d,g){for(const m of g.split(" "))if(m){if(d+m.length>n){for(;c();)d--;o.push(t),d=0}o.push(m),d+=m.length,o.push(" "),d++}return c()&&d--,d};let h=0;for(let d=0;d<l.length;d++){if(h+l[d].length>n&&l[d].includes("{")){h=u(h,l[d]);continue}h+l[d].length>n&&d!==0?(o[o.length-1]===" "&&o.pop(),o.push(t),h=0):d!==0&&(o.push(" "),h++),o.push(l[d]),h+=l[d].length}return o.join("")}header(...t){for(let n=0;n<t.length;n+=2)typeof t[n]=="string"&&typeof t[n+1]=="string"&&(this._header[t[n]]=t[n+1]);return this._header}loadPgn(t,{strict:n=!1,newlineChar:o=`\r?
`}={}){function s(S){return S.replace(/\\/g,"\\")}function r(S){const L={},V=S.split(new RegExp(s(o)));let O="",M="";for(let W=0;W<V.length;W++){const D=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;O=V[W].replace(D,"$1"),M=V[W].replace(D,"$2"),O.trim().length>0&&(L[O]=M)}return L}t=t.trim();const i=new RegExp("^(\\[((?:"+s(o)+")|.)*\\])((?:\\s*"+s(o)+"){2}|(?:\\s*"+s(o)+")*$)").exec(t),l=i&&i.length>=2?i[1]:"";this.reset();const a=r(l);let c="";for(const S in a)S.toLowerCase()==="fen"&&(c=a[S]),this.header(S,a[S]);if(!n)c&&this.load(c,!0);else if(a.SetUp==="1"){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,!0)}function u(S){return Array.from(S).map(function(L){return L.charCodeAt(0)<128?L.charCodeAt(0).toString(16):encodeURIComponent(L).replace(/%/g,"").toLowerCase()}).join("")}function h(S){return S.length==0?"":decodeURIComponent("%"+(S.match(/.{1,2}/g)||[]).join("%"))}const d=function(S){return S=S.replace(new RegExp(s(o),"g")," "),`{${u(S.slice(1,S.length-1))}}`},g=function(S){if(S.startsWith("{")&&S.endsWith("}"))return h(S.slice(1,S.length-1))};let m=t.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${s(o)}]*)`,"g"),function(S,L,V){return L!==void 0?d(L):" "+d(`{${V.slice(1)}}`)}).replace(new RegExp(s(o),"g")," ");const b=/(\([^()]+\))+?/g;for(;b.test(m);)m=m.replace(b,"");m=m.replace(/\d+\.(\.\.)?/g,""),m=m.replace(/\.\.\./g,""),m=m.replace(/\$\d+/g,"");let E=m.trim().split(new RegExp(/\s+/));E=E.filter(S=>S!=="");let P="";for(let S=0;S<E.length;S++){const L=g(E[S]);if(L!==void 0){this._comments[this.fen()]=L;continue}const V=this._moveFromSan(E[S],n);if(V==null)if(kh.indexOf(E[S])>-1)P=E[S];else throw new Error(`Invalid move in PGN: ${E[S]}`);else P="",this._makeMove(V)}P&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",P)}_moveToSan(t,n){let o="";if(t.flags&H.KSIDE_CASTLE)o="O-O";else if(t.flags&H.QSIDE_CASTLE)o="O-O-O";else{if(t.piece!==_e){const s=xh(t,n);o+=t.piece.toUpperCase()+s}t.flags&(H.CAPTURE|H.EP_CAPTURE)&&(t.piece===_e&&(o+=je(t.from)[0]),o+="x"),o+=je(t.to),t.promotion&&(o+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?o+="#":o+="+"),this._undoMove(),o}_moveFromSan(t,n=!1){const o=ls(t);let s=mi(o),r=this._moves({legal:!0,piece:s});for(let d=0,g=r.length;d<g;d++)if(o===ls(this._moveToSan(r[d],r)))return r[d];if(n)return null;let i,l,a,c,u,h=!1;if(l=o.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(i=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(h=!0)):(l=o.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(i=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(h=!0))),s=mi(o),r=this._moves({legal:!0,piece:i||s}),!c)return null;for(let d=0,g=r.length;d<g;d++)if(a){if((!i||i.toLowerCase()==r[d].piece)&&B[a]==r[d].from&&B[c]==r[d].to&&(!u||u.toLowerCase()==r[d].promotion))return r[d];if(h){const m=je(r[d].from);if((!i||i.toLowerCase()==r[d].piece)&&B[c]==r[d].to&&(a==m[0]||a==m[1])&&(!u||u.toLowerCase()==r[d].promotion))return r[d]}}else if(o===ls(this._moveToSan(r[d],r)).replace("x",""))return r[d];return null}ascii(){let t=`   +------------------------+
`;for(let n=B.a8;n<=B.h1;n++){if(Un(n)===0&&(t+=" "+"87654321"[Ut(n)]+" |"),this._board[n]){const o=this._board[n].type,s=this._board[n].color===ke?o.toUpperCase():o.toLowerCase();t+=" "+s+" "}else t+=" . ";n+1&136&&(t+=`|
`,n+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const n=this._moves({legal:!1});let o=0;const s=this._turn;for(let r=0,i=n.length;r<i;r++)this._makeMove(n[r]),this._isKingAttacked(s)||(t-1>0?o+=this.perft(t-1):o++),this._undoMove();return o}_makePretty(t){const{color:n,piece:o,from:s,to:r,flags:i,captured:l,promotion:a}=t;let c="";for(const g in H)H[g]&i&&(c+=ph[g]);const u=je(s),h=je(r),d={color:n,piece:o,from:u,to:h,san:this._moveToSan(t,this._moves({legal:!0})),flags:c,lan:u+h,before:this.fen(),after:""};return this._makeMove(t),d.after=this.fen(),this._undoMove(),l&&(d.captured=l),a&&(d.promotion=a,d.lan+=a),d}turn(){return this._turn}board(){const t=[];let n=[];for(let o=B.a8;o<=B.h1;o++)this._board[o]==null?n.push(null):n.push({square:je(o),type:this._board[o].type,color:this._board[o].color}),o+1&136&&(t.push(n),n=[],o+=8);return t}squareColor(t){if(t in B){const n=B[t];return(Ut(n)+Un(n))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const n=[],o=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const s=n.pop();if(!s)break;t?o.push(this._makePretty(s)):o.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return o}_pruneComments(){const t=[],n={},o=s=>{s in this._comments&&(n[s]=this._comments[s])};for(;this._history.length>0;)t.push(this._undoMove());for(o(this.fen());;){const s=t.pop();if(!s)break;this._makeMove(s),o(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const n=this._comments[t];return delete this._comments[t],{fen:t,comment:n}})}setCastlingRights(t,n){for(const s of[be,kt])n[s]!==void 0&&(n[s]?this._castling[t]|=io[s]:this._castling[t]&=~io[s]);this._updateCastlingRights();const o=this.getCastlingRights(t);return(n[be]===void 0||n[be]===o[be])&&(n[kt]===void 0||n[kt]===o[kt])}getCastlingRights(t){return{[be]:(this._castling[t]&io[be])!==0,[kt]:(this._castling[t]&io[kt])!==0}}moveNumber(){return this._moveNumber}}function Mh(e){const t=[];for(const n of e)t.push({orig:n.to,brush:"yellow"}),n.captured&&t.push({orig:n.from,dest:n.to,brush:"red"}),n.san.includes("+")&&t.push({orig:n.from,dest:n.to,brush:"blue"});return t}function lo(e){return e==="w"?"white":"black"}function _i(e){const t=new Map;for(const n of gh){const o=e.moves({square:n,verbose:!0});o.length&&t.set(o[0].from,o.map(s=>s.to))}return t}function Rh(e,t){if((t==null?void 0:t.type)!=="p")return!1;const n=(t==null?void 0:t.color)==="w"?"8":"1";return e[1]===n}function Bn(e){return!!e&&e instanceof Object&&!(e instanceof Array)&&!(e instanceof Function)}function ko(e){return Bn(e)?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,ko(n)])):e}function Gl(e,t){const n={...e,...t};for(const o in n)n[o]=Bn(e==null?void 0:e[o])&&Bn(t==null?void 0:t[o])?Gl(e[o],t[o]):ko(n[o]);return n}function Wl(e,t){const n={};for(const o in t)if(Bn(e==null?void 0:e[o])&&Bn(t==null?void 0:t[o])){const s=Wl(e[o],t[o]);Object.keys(s).length>0&&(n[o]=s)}else(e==null?void 0:e[o])!==t[o]&&(n[o]=t[o]);return n}const Th={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"},Ih=new Map([["b1",["a3","c3"]],["g1",["f3","h3"]],["a2",["a3","a4"]],["b2",["b3","b4"]],["c2",["c3","c4"]],["d2",["d3","d4"]],["e2",["e3","e4"]],["f2",["f3","f4"]],["g2",["g3","g4"]],["h2",["h3","h4"]]]),Oh="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Lh={fen:Oh,orientation:"white",turnColor:"white",coordinates:!1,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:300},lastMove:void 0,movable:{free:!1,color:"white",showDests:!0,dests:Ih,events:{after:()=>{},afterNewPiece:void 0},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{set:void 0,unset:void 0}},predroppable:{enabled:!1,events:{set:void 0,unset:void 0}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},events:{change:void 0,move:void 0,dropNewPiece:void 0,select:void 0,insert:void 0},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}}}},Nh=["white","black"],er=["a","b","c","d","e","f","g","h"],tr=["1","2","3","4","5","6","7","8"],$h=[...tr].reverse(),nr=Array.prototype.concat(...er.map(e=>tr.map(t=>e+t))),Be=e=>nr[8*e[0]+e[1]],ue=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],zl=nr.map(ue);function Dh(e){let t;const n=()=>(t===void 0&&(t=e()),t);return n.clear=()=>{t=void 0},n}const jh=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},or=e=>e==="white"?"black":"white",Gn=(e,t)=>{const n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o},As=(e,t)=>e.role===t.role&&e.color===t.color,Zn=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],tt=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},Ql=(e,t,n=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},sr=(e,t)=>{e.style.visibility=t?"visible":"hidden"},Yt=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},Yl=e=>e.buttons===2||e.button===2,ut=(e,t)=>{const n=document.createElement(e);return t&&(n.className=t),n};function Jl(e,t,n){const o=ue(e);return t||(o[0]=7-o[0],o[1]=7-o[1]),[n.left+n.width*o[0]/8+n.width/16,n.top+n.height*(7-o[1])/8+n.height/16]}const Gt=(e,t)=>Math.abs(e-t),Fh=e=>(t,n,o,s)=>Gt(t,o)<2&&(e==="white"?s===n+1||n<=1&&s===n+2&&t===o:s===n-1||n>=6&&s===n-2&&t===o),Zl=(e,t,n,o)=>{const s=Gt(e,n),r=Gt(t,o);return s===1&&r===2||s===2&&r===1},Xl=(e,t,n,o)=>Gt(e,n)===Gt(t,o),ea=(e,t,n,o)=>e===n||t===o,ta=(e,t,n,o)=>Xl(e,t,n,o)||ea(e,t,n,o),Kh=(e,t,n)=>(o,s,r,i)=>Gt(o,r)<2&&Gt(s,i)<2||n&&s===i&&s===(e==="white"?0:7)&&(o===4&&(r===2&&t.includes(0)||r===6&&t.includes(7))||t.includes(r));function qh(e,t){const n=t==="white"?"1":"8",o=[];for(const[s,r]of e)s[1]===n&&r.color===t&&r.role==="rook"&&o.push(ue(s)[0]);return o}function na(e,t,n){const o=e.get(t);if(!o)return[];const s=ue(t),r=o.role,i=r==="pawn"?Fh(o.color):r==="knight"?Zl:r==="bishop"?Xl:r==="rook"?ea:r==="queen"?ta:Kh(o.color,qh(e,o.color),n);return zl.filter(l=>(s[0]!==l[0]||s[1]!==l[1])&&i(s[0],s[1],l[0],l[1])).map(Be)}function Le(e,...t){e&&setTimeout(()=>e(...t),1)}function Vh(e){e.orientation=or(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function Hh(e,t){for(const[n,o]of t)o?e.pieces.set(n,o):e.pieces.delete(n)}function Uh(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[n,o]of e.pieces)o.role==="king"&&o.color===t&&(e.check=n)}function Bh(e,t,n,o){Ot(e),e.premovable.current=[t,n],Le(e.premovable.events.set,t,n,o)}function It(e){e.premovable.current&&(e.premovable.current=void 0,Le(e.premovable.events.unset))}function Gh(e,t,n){It(e),e.predroppable.current={role:t,key:n},Le(e.predroppable.events.set,t,n)}function Ot(e){const t=e.predroppable;t.current&&(t.current=void 0,Le(t.events.unset))}function Wh(e,t,n){if(!e.autoCastle)return!1;const o=e.pieces.get(t);if(!o||o.role!=="king")return!1;const s=ue(t),r=ue(n);if(s[1]!==0&&s[1]!==7||s[1]!==r[1])return!1;s[0]===4&&!e.pieces.has(n)&&(r[0]===6?n=Be([7,r[1]]):r[0]===2&&(n=Be([0,r[1]])));const i=e.pieces.get(n);return!i||i.color!==o.color||i.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(n),s[0]<r[0]?(e.pieces.set(Be([6,r[1]]),o),e.pieces.set(Be([5,r[1]]),i)):(e.pieces.set(Be([2,r[1]]),o),e.pieces.set(Be([3,r[1]]),i)),!0)}function oa(e,t,n){const o=e.pieces.get(t),s=e.pieces.get(n);if(t===n||!o)return!1;const r=s&&s.color!==o.color?s:void 0;return n===e.selected&&We(e),Le(e.events.move,t,n,r),Wh(e,t,n)||(e.pieces.set(n,o),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,Le(e.events.change),r||!0}function rr(e,t,n,o){if(e.pieces.has(n))if(o)e.pieces.delete(n);else return!1;return Le(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,Le(e.events.change),e.movable.dests=void 0,e.turnColor=or(e.turnColor),!0}function sa(e,t,n){const o=oa(e,t,n);return o&&(e.movable.dests=void 0,e.turnColor=or(e.turnColor),e.animation.current=void 0),o}function ra(e,t,n){if(ir(e,t,n)){const o=sa(e,t,n);if(o){const s=e.hold.stop();We(e);const r={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:s};return o!==!0&&(r.captured=o),Le(e.movable.events.after,t,n,r),!0}}else if(Qh(e,t,n))return Bh(e,t,n,{ctrlKey:e.stats.ctrlKey}),We(e),!0;return We(e),!1}function ia(e,t,n,o){const s=e.pieces.get(t);s&&(zh(e,t,n)||o)?(e.pieces.delete(t),rr(e,s,n,o),Le(e.movable.events.afterNewPiece,s.role,n,{premove:!1,predrop:!1})):s&&Yh(e,t,n)?Gh(e,s.role,n):(It(e),Ot(e)),e.pieces.delete(t),We(e)}function Ms(e,t,n){if(Le(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){We(e),e.hold.cancel();return}else if((e.selectable.enabled||n)&&e.selected!==t&&ra(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(aa(e,t)||lr(e,t))&&(la(e,t),e.hold.start())}function la(e,t){e.selected=t,lr(e,t)?e.premovable.customDests||(e.premovable.dests=na(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function We(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function aa(e,t){const n=e.pieces.get(t);return!!n&&(e.movable.color==="both"||e.movable.color===n.color&&e.turnColor===n.color)}const ir=(e,t,n)=>{var o,s;return t!==n&&aa(e,t)&&(e.movable.free||!!(!((s=(o=e.movable.dests)===null||o===void 0?void 0:o.get(t))===null||s===void 0)&&s.includes(n)))};function zh(e,t,n){const o=e.pieces.get(t);return!!o&&(t===n||!e.pieces.has(n))&&(e.movable.color==="both"||e.movable.color===o.color&&e.turnColor===o.color)}function lr(e,t){const n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function Qh(e,t,n){var o,s;const r=(s=(o=e.premovable.customDests)===null||o===void 0?void 0:o.get(t))!==null&&s!==void 0?s:na(e.pieces,t,e.premovable.castle);return t!==n&&lr(e,t)&&r.includes(n)}function Yh(e,t,n){const o=e.pieces.get(t),s=e.pieces.get(n);return!!o&&(!s||s.color!==e.movable.color)&&e.predroppable.enabled&&(o.role!=="pawn"||n[1]!=="1"&&n[1]!=="8")&&e.movable.color===o.color&&e.turnColor!==o.color}function Jh(e,t){const n=e.pieces.get(t);return!!n&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function Zh(e){const t=e.premovable.current;if(!t)return!1;const n=t[0],o=t[1];let s=!1;if(ir(e,n,o)){const r=sa(e,n,o);if(r){const i={premove:!0};r!==!0&&(i.captured=r),Le(e.movable.events.after,n,o,i),s=!0}}return It(e),s}function Xh(e,t){const n=e.predroppable.current;let o=!1;if(!n)return!1;if(t(n)){const s={role:n.role,color:e.movable.color};rr(e,s,n.key)&&(Le(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),o=!0)}return Ot(e),o}function ar(e){It(e),Ot(e),We(e)}function bi(e){e.movable.color=e.movable.dests=e.animation.current=void 0,ar(e)}function Jt(e,t,n){let o=Math.floor(8*(e[0]-n.left)/n.width);t||(o=7-o);let s=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(s=7-s),o>=0&&o<8&&s>=0&&s<8?Be([o,s]):void 0}function ep(e,t,n,o){const s=ue(e),r=zl.filter(a=>ta(s[0],s[1],a[0],a[1])||Zl(s[0],s[1],a[0],a[1])),i=r.map(a=>Jl(Be(a),n,o)).map(a=>Gn(t,a)),[,l]=i.reduce((a,c,u)=>a[0]<c?a:[c,u],[i[0],0]);return Be(r[l])}const Ne=e=>e.orientation==="white",ca="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",tp={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},np={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function ua(e){e==="start"&&(e=ca);const t=new Map;let n=7,o=0;for(const s of e)switch(s){case" ":case"[":return t;case"/":if(--n,n<0)return t;o=0;break;case"~":{const r=t.get(Be([o-1,n]));r&&(r.promoted=!0);break}default:{const r=s.charCodeAt(0);if(r<57)o+=r-48;else{const i=s.toLowerCase();t.set(Be([o,n]),{role:tp[i],color:s===i?"black":"white"}),++o}}}return t}function op(e){return $h.map(t=>er.map(n=>{const o=e.get(n+t);if(o){let s=np[o.role];return o.color==="white"&&(s=s.toUpperCase()),o.promoted&&(s+="~"),s}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function fa(e,t){t.animation&&(cr(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function da(e,t){var n,o,s;if(!((n=t.movable)===null||n===void 0)&&n.dests&&(e.movable.dests=void 0),!((o=t.drawable)===null||o===void 0)&&o.autoShapes&&(e.drawable.autoShapes=[]),cr(e,t),t.fen&&(e.pieces=ua(t.fen),e.drawable.shapes=((s=t.drawable)===null||s===void 0?void 0:s.shapes)||[]),"check"in t&&Uh(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&la(e,e.selected),fa(e,t),!e.movable.rookCastle&&e.movable.dests){const r=e.movable.color==="white"?"1":"8",i="e"+r,l=e.movable.dests.get(i),a=e.pieces.get(i);if(!l||!a||a.role!=="king")return;e.movable.dests.set(i,l.filter(c=>!(c==="a"+r&&l.includes("c"+r))&&!(c==="h"+r&&l.includes("g"+r))))}}function cr(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)&&vi(e[n])&&vi(t[n])?cr(e[n],t[n]):e[n]=t[n])}function vi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const Dt=(e,t)=>t.animation.enabled?ip(e,t):vt(e,t);function vt(e,t){const n=e(t);return t.dom.redraw(),n}const as=(e,t)=>({key:e,pos:ue(e),piece:t}),sp=(e,t)=>t.sort((n,o)=>Gn(e.pos,n.pos)-Gn(e.pos,o.pos))[0];function rp(e,t){const n=new Map,o=[],s=new Map,r=[],i=[],l=new Map;let a,c,u;for(const[h,d]of e)l.set(h,as(h,d));for(const h of nr)a=t.pieces.get(h),c=l.get(h),a?c?As(a,c.piece)||(r.push(c),i.push(as(h,a))):i.push(as(h,a)):c&&r.push(c);for(const h of i)c=sp(h,r.filter(d=>As(h.piece,d.piece))),c&&(u=[c.pos[0]-h.pos[0],c.pos[1]-h.pos[1]],n.set(h.key,u.concat(u)),o.push(c.key));for(const h of r)o.includes(h.key)||s.set(h.key,h.piece);return{anims:n,fadings:s}}function ha(e,t){const n=e.animation.current;if(n===void 0){e.dom.destroyed||e.dom.redrawNow();return}const o=1-(t-n.start)*n.frequency;if(o<=0)e.animation.current=void 0,e.dom.redrawNow();else{const s=lp(o);for(const r of n.plan.anims.values())r[2]=r[0]*s,r[3]=r[1]*s;e.dom.redrawNow(!0),requestAnimationFrame((r=performance.now())=>ha(e,r))}}function ip(e,t){const n=new Map(t.pieces),o=e(t),s=rp(n,t);if(s.anims.size||s.fadings.size){const r=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:s},r||ha(t,performance.now())}else t.dom.redraw();return o}const lp=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,ap=["green","red","blue","yellow"];function cp(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?We(e):ar(e);const n=Yt(t),o=Jt(n,Ne(e),e.dom.bounds());o&&(e.drawable.current={orig:o,pos:n,brush:hp(t),snapToValidMove:e.drawable.defaultSnapToValidMove},pa(e))}function pa(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const n=Jt(t.pos,Ne(e),e.dom.bounds());n||(t.snapToValidMove=!1);const o=t.snapToValidMove?ep(t.orig,t.pos,Ne(e),e.dom.bounds()):n;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),pa(e)}})}function up(e,t){e.drawable.current&&(e.drawable.current.pos=Yt(t))}function fp(e){const t=e.drawable.current;t&&(t.mouseSq&&pp(e.drawable,t),ga(e))}function ga(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function dp(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),ma(e.drawable))}function hp(e){var t;const n=(e.shiftKey||e.ctrlKey)&&Yl(e),o=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return ap[(n?1:0)+(o?2:0)]}function pp(e,t){const n=s=>s.orig===t.orig&&s.dest===t.dest,o=e.shapes.find(n);o&&(e.shapes=e.shapes.filter(s=>!n(s))),(!o||o.brush!==t.brush)&&e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),ma(e)}function ma(e){e.onChange&&e.onChange(e.shapes)}function gp(e,t){if(!(e.trustAllEvents||t.isTrusted)||t.button!==void 0&&t.button!==0||t.touches&&t.touches.length>1)return;const n=e.dom.bounds(),o=Yt(t),s=Jt(o,Ne(e),n);if(!s)return;const r=e.pieces.get(s),i=e.selected;if(!i&&e.drawable.enabled&&(e.drawable.eraseOnClick||!r||r.color!==e.turnColor)&&dp(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||r||i||mp(e,o)))t.preventDefault();else if(t.touches)return;const l=!!e.premovable.current,a=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&ir(e,e.selected,s)?Dt(h=>Ms(h,s),e):Ms(e,s);const c=e.selected===s,u=ba(e,s);if(r&&u&&c&&Jh(e,s)){e.draggable.current={orig:s,piece:r,origPos:o,pos:o,started:e.draggable.autoDistance&&e.stats.dragged,element:u,previouslySelected:i,originTarget:t.target,keyHasChanged:!1},u.cgDragging=!0,u.classList.add("dragging");const h=e.dom.elements.ghost;h&&(h.className=`ghost ${r.color} ${r.role}`,tt(h,Zn(n)(ue(s),Ne(e))),sr(h,!0)),ur(e)}else l&&It(e),a&&Ot(e);e.dom.redraw()}function mp(e,t){const n=Ne(e),o=e.dom.bounds(),s=Math.pow(o.width/8,2);for(const r of e.pieces.keys()){const i=Jl(r,n,o);if(Gn(i,t)<=s)return!0}return!1}function _p(e,t,n,o){const s="a0";e.pieces.set(s,t),e.dom.redraw();const r=Yt(n);e.draggable.current={orig:s,piece:t,origPos:r,pos:r,started:!0,element:()=>ba(e,s),originTarget:n.target,newPiece:!0,force:!!o,keyHasChanged:!1},ur(e)}function ur(e){requestAnimationFrame(()=>{var t;const n=e.draggable.current;if(!n)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(n.orig)&&(e.animation.current=void 0);const o=e.pieces.get(n.orig);if(!o||!As(o,n.piece))Po(e);else if(!n.started&&Gn(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){if(typeof n.element=="function"){const r=n.element();if(!r)return;r.cgDragging=!0,r.classList.add("dragging"),n.element=r}const s=e.dom.bounds();tt(n.element,[n.pos[0]-s.left-s.width/16,n.pos[1]-s.top-s.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==Jt(n.pos,Ne(e),s))}ur(e)})}function bp(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=Yt(t))}function vp(e,t){const n=e.draggable.current;if(!n)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&n.originTarget!==t.target&&!n.newPiece){e.draggable.current=void 0;return}It(e),Ot(e);const o=Yt(t)||n.pos,s=Jt(o,Ne(e),e.dom.bounds());s&&n.started&&n.orig!==s?n.newPiece?ia(e,n.orig,s,n.force):(e.stats.ctrlKey=t.ctrlKey,ra(e,n.orig,s)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!s&&(e.pieces.delete(n.orig),Le(e.events.change)),(n.orig===n.previouslySelected||n.keyHasChanged)&&(n.orig===s||!s)?We(e):e.selectable.enabled||We(e),_a(e),e.draggable.current=void 0,e.dom.redraw()}function Po(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,We(e),_a(e),e.dom.redraw())}function _a(e){const t=e.dom.elements;t.ghost&&sr(t.ghost,!1)}function ba(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&n.tagName==="PIECE")return n;n=n.nextSibling}}function yp(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{yi(e,2),setTimeout(()=>yi(e,void 0),120)},120)}function yi(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function wp(e,t){function n(){Vh(e),t()}return{set(o){o.orientation&&o.orientation!==e.orientation&&n(),fa(e,o),(o.fen?Dt:vt)(s=>da(s,o),e)},state:e,getFen:()=>op(e.pieces),toggleOrientation:n,setPieces(o){Dt(s=>Hh(s,o),e)},selectSquare(o,s){o?Dt(r=>Ms(r,o,s),e):e.selected&&(We(e),e.dom.redraw())},move(o,s){Dt(r=>oa(r,o,s),e)},newPiece(o,s){Dt(r=>rr(r,o,s),e)},playPremove(){if(e.premovable.current){if(Dt(Zh,e))return!0;e.dom.redraw()}return!1},playPredrop(o){if(e.predroppable.current){const s=Xh(e,o);return e.dom.redraw(),s}return!1},cancelPremove(){vt(It,e)},cancelPredrop(){vt(Ot,e)},cancelMove(){vt(o=>{ar(o),Po(o)},e)},stop(){vt(o=>{bi(o),Po(o)},e)},explode(o){yp(e,o)},setAutoShapes(o){vt(s=>s.drawable.autoShapes=o,e)},setShapes(o){vt(s=>s.drawable.shapes=o,e)},getKeyAtDomPos(o){return Jt(o,Ne(e),e.dom.bounds())},redrawAll:t,dragNewPiece(o,s,r){_p(e,o,s,r)},destroy(){bi(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function Sp(){return{pieces:ua(ca),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purp",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},hilite:{key:"hilite",color:"#fff",opacity:1,lineWidth:1}},prevSvgHash:""},hold:jh()}}function Cp(){const e=de("defs"),t=Re(de("filter"),{id:"cg-filter-blur"});return t.appendChild(Re(de("feGaussianBlur"),{stdDeviation:"0.022"})),e.appendChild(t),e}function Ep(e,t,n){var o;const s=e.drawable,r=s.current,i=r&&r.mouseSq?r:void 0,l=new Map,a=e.dom.bounds(),c=s.autoShapes.filter(g=>!g.piece);for(const g of s.shapes.concat(c).concat(i?[i]:[])){if(!g.dest)continue;const m=(o=l.get(g.dest))!==null&&o!==void 0?o:new Set,b=Ao(xo(ue(g.orig),e.orientation),a),E=Ao(xo(ue(g.dest),e.orientation),a);m.add(Ts(b,E)),l.set(g.dest,m)}const u=s.shapes.concat(c).map(g=>({shape:g,current:!1,hash:wi(g,Rs(g.dest,l),!1,a)}));i&&u.push({shape:i,current:!0,hash:wi(i,Rs(i.dest,l),!0,a)});const h=u.map(g=>g.hash).join(";");if(h===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=h;const d=t.querySelector("defs");kp(s,u,d),Pp(u,t.querySelector("g"),n.querySelector("g"),g=>Mp(e,g,s.brushes,l,a))}function kp(e,t,n){var o;const s=new Map;let r;for(const a of t.filter(c=>c.shape.dest&&c.shape.brush))r=va(e.brushes[a.shape.brush],a.shape.modifiers),!((o=a.shape.modifiers)===null||o===void 0)&&o.hilite&&s.set("hilite",e.brushes.hilite),s.set(r.key,r);const i=new Set;let l=n.firstElementChild;for(;l;)i.add(l.getAttribute("cgKey")),l=l.nextElementSibling;for(const[a,c]of s.entries())i.has(a)||n.appendChild(Ip(c))}function Pp(e,t,n,o){const s=new Map;for(const r of e)s.set(r.hash,!1);for(const r of[t,n]){const i=[];let l=r.firstElementChild,a;for(;l;)a=l.getAttribute("cgHash"),s.has(a)?s.set(a,!0):i.push(l),l=l.nextElementSibling;for(const c of i)r.removeChild(c)}for(const r of e.filter(i=>!s.get(i.hash)))for(const i of o(r))i.isCustom?n.appendChild(i.el):t.appendChild(i.el)}function wi({orig:e,dest:t,brush:n,piece:o,modifiers:s,customSvg:r,label:i},l,a,c){var u,h;return[c.width,c.height,a,e,t,n,l&&"-",o&&xp(o),s&&Ap(s),r&&`custom-${Si(r.html)},${(h=(u=r.center)===null||u===void 0?void 0:u[0])!==null&&h!==void 0?h:"o"}`,i&&`label-${Si(i.text)}`].filter(d=>d).join(",")}function xp(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function Ap(e){return[e.lineWidth,e.hilite&&"*"].filter(t=>t).join(",")}function Si(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function Mp(e,{shape:t,current:n,hash:o},s,r,i){var l,a;const c=Ao(xo(ue(t.orig),e.orientation),i),u=t.dest?Ao(xo(ue(t.dest),e.orientation),i):c,h=t.brush&&va(s[t.brush],t.modifiers),d=r.get(t.dest),g=[];if(h){const m=Re(de("g"),{cgHash:o});g.push({el:m}),c[0]!==u[0]||c[1]!==u[1]?m.appendChild(Tp(t,h,c,u,n,Rs(t.dest,r))):m.appendChild(Rp(s[t.brush],c,n,i))}if(t.label){const m=t.label;(l=m.fill)!==null&&l!==void 0||(m.fill=t.brush&&s[t.brush].color);const b=t.brush?void 0:"tr";g.push({el:Op(m,o,c,u,d,b),isCustom:!0})}if(t.customSvg){const m=(a=t.customSvg.center)!==null&&a!==void 0?a:"orig",[b,E]=m==="label"?wa(c,u,d).map(S=>S-.5):m==="dest"?u:c,P=Re(de("g"),{transform:`translate(${b},${E})`,cgHash:o});P.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,g.push({el:P,isCustom:!0})}return g}function Rp(e,t,n,o){const s=Lp(),r=(o.width+o.height)/(4*Math.max(o.width,o.height));return Re(de("circle"),{stroke:e.color,"stroke-width":s[n?0:1],fill:"none",opacity:ya(e,n),cx:t[0],cy:t[1],r:r-s[1]/2})}function Tp(e,t,n,o,s,r){var i;function l(u){var h;const d=$p(r&&!s),g=o[0]-n[0],m=o[1]-n[1],b=Math.atan2(m,g),E=Math.cos(b)*d,P=Math.sin(b)*d;return Re(de("line"),{stroke:u?"white":t.color,"stroke-width":Np(t,s)+(u?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${u?"hilite":t.key})`,opacity:!((h=e.modifiers)===null||h===void 0)&&h.hilite?1:ya(t,s),x1:n[0],y1:n[1],x2:o[0]-E,y2:o[1]-P})}if(!(!((i=e.modifiers)===null||i===void 0)&&i.hilite))return l(!1);const a=de("g"),c=Re(de("g"),{filter:"url(#cg-filter-blur)"});return c.appendChild(Dp(n,o)),c.appendChild(l(!0)),a.appendChild(c),a.appendChild(l(!1)),a}function Ip(e){const t=Re(de("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key==="hilite"?1.86:2.05,refY:2});return t.appendChild(Re(de("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function Op(e,t,n,o,s,r){var i;const l=.4*.75**e.text.length,a=wa(n,o,s),c=r==="tr"?.4:0,u=Re(de("g"),{transform:`translate(${a[0]+c},${a[1]-c})`,cgHash:t});u.appendChild(Re(de("circle"),{r:.4/2,"fill-opacity":r?1:.8,"stroke-opacity":r?1:.7,"stroke-width":.03,fill:(i=e.fill)!==null&&i!==void 0?i:"#666",stroke:"white"}));const h=Re(de("text"),{"font-size":l,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return h.innerHTML=e.text,u.appendChild(h),u}function xo(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function Rs(e,t){return(e&&t.has(e)&&t.get(e).size>1)===!0}function de(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Re(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function va(e,t){return t?{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(n=>n).join("")}:e}function Lp(){return[3/64,4/64]}function Np(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function ya(e,t){return(e.opacity||1)*(t?.9:1)}function $p(e){return(e?20:10)/64}function Ao(e,t){const n=Math.min(1,t.width/t.height),o=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*o]}function Dp(e,t){const n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return Re(de("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}function Ts(e,t,n=!0){const o=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(o*8/Math.PI)+16)%16:o}function jp(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((n,o)=>n+o*o,0))}function wa(e,t,n){let o=jp(e,t);const s=Ts(e,t,!1);if(n&&(o-=33/64,n.size>1)){o-=10/64;const r=Ts(e,t);(n.has((r+1)%16)||n.has((r+15)%16))&&r&1&&(o-=.4)}return[e[0]-Math.cos(s)*o,e[1]-Math.sin(s)*o].map(r=>r+.5)}function Fp(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const a of Nh)e.classList.toggle("orientation-"+a,t.orientation===a);e.classList.toggle("manipulable",!t.viewOnly);const n=ut("cg-container");e.appendChild(n);const o=ut("cg-board");n.appendChild(o);let s,r,i;if(t.drawable.visible&&(s=Re(de("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),s.appendChild(Cp()),s.appendChild(de("g")),r=Re(de("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),r.appendChild(de("g")),i=ut("cg-auto-pieces"),n.appendChild(s),n.appendChild(r),n.appendChild(i)),t.coordinates){const a=t.orientation==="black"?" black":"",c=t.ranksPosition==="left"?" left":"";n.appendChild(Ci(tr,"ranks"+a+c)),n.appendChild(Ci(er,"files"+a))}let l;return t.draggable.enabled&&t.draggable.showGhost&&(l=ut("piece","ghost"),sr(l,!1),n.appendChild(l)),{board:o,container:n,wrap:e,ghost:l,svg:s,customSvg:r,autoPieces:i}}function Ci(e,t){const n=ut("coords",t);let o;for(const s of e)o=ut("coord"),o.textContent=s,n.appendChild(o);return n}function Kp(e,t){if(!e.dropmode.active)return;It(e),Ot(e);const n=e.dropmode.piece;if(n){e.pieces.set("a0",n);const o=Yt(t),s=o&&Jt(o,Ne(e),e.dom.bounds());s&&ia(e,"a0",s)}e.dom.redraw()}function qp(e,t){const n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",s=>s.preventDefault()),e.viewOnly)return;const o=Hp(e);n.addEventListener("touchstart",o,{passive:!1}),n.addEventListener("mousedown",o,{passive:!1})}function Vp(e,t){const n=[];if("ResizeObserver"in window||n.push(kn(document.body,"chessground.resize",t)),!e.viewOnly){const o=Ei(e,bp,up),s=Ei(e,vp,fp);for(const i of["touchmove","mousemove"])n.push(kn(document,i,o));for(const i of["touchend","mouseup"])n.push(kn(document,i,s));const r=()=>e.dom.bounds.clear();n.push(kn(document,"scroll",r,{capture:!0,passive:!0})),n.push(kn(window,"resize",r,{passive:!0}))}return()=>n.forEach(o=>o())}function kn(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}const Hp=e=>t=>{e.draggable.current?Po(e):e.drawable.current?ga(e):t.shiftKey||Yl(t)?e.drawable.enabled&&cp(e,t):e.viewOnly||(e.dropmode.active?Kp(e,t):gp(e,t))},Ei=(e,t,n)=>o=>{e.drawable.current?e.drawable.enabled&&n(e,o):e.viewOnly||t(e,o)};function Up(e){const t=Ne(e),n=Zn(e.dom.bounds()),o=e.dom.elements.board,s=e.pieces,r=e.animation.current,i=r?r.plan.anims:new Map,l=r?r.plan.fadings:new Map,a=e.draggable.current,c=Gp(e),u=new Set,h=new Set,d=new Map,g=new Map;let m,b,E,P,S,L,V,O,M,W;for(b=o.firstChild;b;){if(m=b.cgKey,Sa(b))if(E=s.get(m),S=i.get(m),L=l.get(m),P=b.cgPiece,b.cgDragging&&(!a||a.orig!==m)&&(b.classList.remove("dragging"),tt(b,n(ue(m),t)),b.cgDragging=!1),!L&&b.cgFading&&(b.cgFading=!1,b.classList.remove("fading")),E){if(S&&b.cgAnimating&&P===Pn(E)){const D=ue(m);D[0]+=S[2],D[1]+=S[3],b.classList.add("anim"),tt(b,n(D,t))}else b.cgAnimating&&(b.cgAnimating=!1,b.classList.remove("anim"),tt(b,n(ue(m),t)),e.addPieceZIndex&&(b.style.zIndex=cs(ue(m),t)));P===Pn(E)&&(!L||!b.cgFading)?u.add(m):L&&P===Pn(L)?(b.classList.add("fading"),b.cgFading=!0):us(d,P,b)}else us(d,P,b);else if(Ca(b)){const D=b.className;c.get(m)===D?h.add(m):us(g,D,b)}b=b.nextSibling}for(const[D,z]of c)if(!h.has(D)){M=g.get(z),W=M&&M.pop();const Z=n(ue(D),t);if(W)W.cgKey=D,tt(W,Z);else{const re=ut("square",z);re.cgKey=D,tt(re,Z),o.insertBefore(re,o.firstChild)}}for(const[D,z]of s)if(S=i.get(D),!u.has(D))if(V=d.get(Pn(z)),O=V&&V.pop(),O){O.cgKey=D,O.cgFading&&(O.classList.remove("fading"),O.cgFading=!1);const Z=ue(D);e.addPieceZIndex&&(O.style.zIndex=cs(Z,t)),S&&(O.cgAnimating=!0,O.classList.add("anim"),Z[0]+=S[2],Z[1]+=S[3]),tt(O,n(Z,t))}else{const Z=Pn(z),re=ut("piece",Z),ge=ue(D);re.cgPiece=Z,re.cgKey=D,S&&(re.cgAnimating=!0,ge[0]+=S[2],ge[1]+=S[3]),tt(re,n(ge,t)),e.addPieceZIndex&&(re.style.zIndex=cs(ge,t)),o.appendChild(re)}for(const D of d.values())Pi(e,D);for(const D of g.values())Pi(e,D)}function Bp(e){const t=Ne(e),n=Zn(e.dom.bounds());let o=e.dom.elements.board.firstChild;for(;o;)(Sa(o)&&!o.cgAnimating||Ca(o))&&tt(o,n(ue(o.cgKey),t)),o=o.nextSibling}function ki(e){var t,n;const o=e.dom.elements.wrap.getBoundingClientRect(),s=e.dom.elements.container,r=o.height/o.width,i=Math.floor(o.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,l=i*r;s.style.width=i+"px",s.style.height=l+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("--cg-width",i+"px"),(n=e.addDimensionsCssVarsTo)===null||n===void 0||n.style.setProperty("--cg-height",l+"px")}const Sa=e=>e.tagName==="PIECE",Ca=e=>e.tagName==="SQUARE";function Pi(e,t){for(const n of t)e.dom.elements.board.removeChild(n)}function cs(e,t){const n=e[1];return`${t?3+7-n:3+n}`}const Pn=e=>`${e.color} ${e.role}`;function Gp(e){var t,n,o;const s=new Map;if(e.lastMove&&e.highlight.lastMove)for(const l of e.lastMove)ct(s,l,"last-move");if(e.check&&e.highlight.check&&ct(s,e.check,"check"),e.selected&&(ct(s,e.selected,"selected"),e.movable.showDests)){const l=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(l)for(const c of l)ct(s,c,"move-dest"+(e.pieces.has(c)?" oc":""));const a=(o=(n=e.premovable.customDests)===null||n===void 0?void 0:n.get(e.selected))!==null&&o!==void 0?o:e.premovable.dests;if(a)for(const c of a)ct(s,c,"premove-dest"+(e.pieces.has(c)?" oc":""))}const r=e.premovable.current;if(r)for(const l of r)ct(s,l,"current-premove");else e.predroppable.current&&ct(s,e.predroppable.current.key,"current-premove");const i=e.exploding;if(i)for(const l of i.keys)ct(s,l,"exploding"+i.stage);return e.highlight.custom&&e.highlight.custom.forEach((l,a)=>{ct(s,a,l)}),s}function ct(e,t,n){const o=e.get(t);o?e.set(t,`${o} ${n}`):e.set(t,n)}function us(e,t,n){const o=e.get(t);o?o.push(n):e.set(t,[n])}function Wp(e,t,n){const o=new Map,s=[];for(const l of e)o.set(l.hash,!1);let r=t.firstElementChild,i;for(;r;)i=r.getAttribute("cgHash"),o.has(i)?o.set(i,!0):s.push(r),r=r.nextElementSibling;for(const l of s)t.removeChild(l);for(const l of e)o.get(l.hash)||t.appendChild(n(l))}function zp(e,t){const n=e.drawable.autoShapes.filter(o=>o.piece).map(o=>({shape:o,hash:Jp(o),current:!1}));Wp(n,t,o=>Yp(e,o,e.dom.bounds()))}function Qp(e){var t;const n=Ne(e),o=Zn(e.dom.bounds());let s=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;s;)Ql(s,o(ue(s.cgKey),n),s.cgScale),s=s.nextSibling}function Yp(e,{shape:t,hash:n},o){var s,r,i;const l=t.orig,a=(s=t.piece)===null||s===void 0?void 0:s.role,c=(r=t.piece)===null||r===void 0?void 0:r.color,u=(i=t.piece)===null||i===void 0?void 0:i.scale,h=ut("piece",`${a} ${c}`);return h.setAttribute("cgHash",n),h.cgKey=l,h.cgScale=u,Ql(h,Zn(o)(ue(l),Ne(e)),u),h}const Jp=e=>{var t,n,o;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(n=e.piece)===null||n===void 0?void 0:n.color,(o=e.piece)===null||o===void 0?void 0:o.scale].join(",")};function Zp(e,t){const n=Sp();da(n,t||{});function o(){const s="dom"in n?n.dom.unbind:void 0,r=Fp(e,n),i=Dh(()=>r.board.getBoundingClientRect()),l=u=>{Up(c),r.autoPieces&&zp(c,r.autoPieces),!u&&r.svg&&Ep(c,r.svg,r.customSvg)},a=()=>{ki(c),Bp(c),r.autoPieces&&Qp(c)},c=n;return c.dom={elements:r,bounds:i,redraw:Xp(l),redrawNow:l,unbind:s},c.drawable.prevSvgHash="",ki(c),l(!1),qp(c,a),s||(c.dom.unbind=Vp(c,a)),c.events.insert&&c.events.insert(r),c}return wp(o(),o)}function Xp(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}class eg{constructor(t,n,o,s){Ee(this,"game");Ee(this,"board");Ee(this,"boardState");Ee(this,"props");Ee(this,"emit");this.boardState=n,this.props=o,this.emit=s,this.game=new Ah,this.board=Zp(t),this.resetBoard()}updateGameState({updateFen:t=!0}={}){this.boardState.historyViewerState.isEnabled||(t&&this.board.set({fen:this.game.fen()}),this.board.state.turnColor=this.getTurnColor(),this.board.state.movable.free?(this.board.state.movable.color="both",this.board.state.movable.dests=new Map):(this.board.state.movable.color=this.props.playerColor||this.board.state.turnColor,this.board.state.movable.dests=_i(this.game)),this.displayInCheck(this.game.inCheck(),this.board.state.turnColor),this.boardState.showThreats&&this.drawMoves()),this.emitEvents()}displayInCheck(t,n){if(t){for(const[o,s]of this.board.state.pieces)if(s.role==="king"&&s.color===n){this.board.state.check=o;return}}else this.board.state.check=void 0}emitEvents(){this.game.inCheck()&&this.emit(this.game.isCheckmate()?"checkmate":"check",this.board.state.turnColor),this.game.isDraw()&&this.emit("draw"),this.game.isStalemate()&&this.emit("stalemate")}async changeTurn(t,n,o){let s;Rh(n,this.game.get(t))&&(s=await new Promise(r=>{this.boardState.promotionDialogState={isEnabled:!0,color:this.getTurnColor(),callback:r}})),this.move({from:t,to:n,promotion:s})}resetBoard(){this.setConfig(this.props.boardConfig,!0)}undoLastMove(){const t=this.game.undo();if(t!=null&&(this.boardState.historyViewerState.isEnabled&&this.boardState.historyViewerState.plyViewing===this.getCurrentPlyNumber()&&this.stopViewingHistory(),!this.boardState.historyViewerState.isEnabled)){this.board.set({fen:t.before}),this.updateGameState({updateFen:!1});const n=this.getLastMove();this.board.state.lastMove=n?[n==null?void 0:n.from,n==null?void 0:n.to]:void 0}}getMaterialCount(){const t=this.board.state.pieces,n={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:0},o={materialWhite:0,materialBlack:0,materialDiff:0};for(const s of t)s[1].color==="white"?o.materialWhite+=n[s[1].role]:o.materialBlack+=n[s[1].role];return o.materialDiff=o.materialWhite-o.materialBlack,o}getCapturedPieces(){const t={white:[],black:[]};for(const{color:n,captured:o}of this.getHistory(!0))o&&t[lo(n)].push(o);return t}toggleOrientation(){this.board.toggleOrientation()}drawMoves(){this.boardState.showThreats=!0,this.board.setShapes(Mh(this.game.moves({verbose:!0})))}hideMoves(){this.boardState.showThreats=!1,this.board.setShapes([])}drawMove(t,n,o){this.board.setShapes([{orig:t,dest:n,brush:o}])}toggleMoves(){this.boardState.showThreats?this.hideMoves():this.drawMoves()}async getOpeningName(){var t,n;try{const o=this.game.history({verbose:!0}).map(s=>s.lan).join(",");return(n=(t=(await(await fetch(`https://explorer.lichess.ovh/masters?play=${o}`)).json()).opening)==null?void 0:t.name)!=null?n:null}catch{return null}}move(t){let n;try{n=this.game.move(t)}catch{return typeof t=="object"&&this.board.state.movable.free&&(this.board.move(t.from,t.to),this.updateGameState({updateFen:!1})),!1}return this.emit("move",n),n!=null&&n.promotion&&this.emit("promotion",{color:lo(n.color),promotedTo:n.promotion.toUpperCase(),sanMove:n.san}),this.boardState.historyViewerState.isEnabled||(this.board.move(n.from,n.to),(n.flags==="e"||(n==null?void 0:n.promotion))&&setTimeout(()=>this.board.set({fen:n.after}),this.board.state.animation.current?this.board.state.animation.duration:0),this.updateGameState({updateFen:!1}),_n(this.board.playPremove)),!0}getTurnColor(){return lo(this.game.turn())}getPossibleMoves(){return _i(this.game)}getCurrentTurnNumber(){return this.game.moveNumber()}getCurrentPlyNumber(){return 2*this.getCurrentTurnNumber()-(this.getTurnColor()==="black"?1:2)}getLastMove(){return this.game.history({verbose:!0}).at(-1)}getHistory(t=!1){return this.game.history({verbose:t})}getFen(){return this.game.fen()}getBoardPosition(){return this.game.board()}getPgn(){return this.game.pgn()}getIsGameOver(){return this.game.isGameOver()}getIsCheckmate(){return this.game.isCheckmate()}getIsCheck(){return this.game.isCheck()}getIsStalemate(){return this.game.isStalemate()}getIsDraw(){return this.game.isDraw()}getIsThreefoldRepetition(){return this.game.isThreefoldRepetition()}getIsInsufficientMaterial(){return this.game.isInsufficientMaterial()}getSquareColor(t){return this.game.squareColor(t)}getSquare(t){return this.game.get(t)}setPosition(t){this.game.load(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}putPiece(t,n){if(this.board.state.movable.free){const o=this.board.state.pieces;return o.set(n,{color:t.color==="w"?"white":"black",role:Th[t.type]}),this.board.setPieces(o),!0}else{const o=this.game.put(t,n);return o&&this.updateGameState(),o}}removePiece(t){this.board.state.pieces.delete(t),this.game.remove(t)}clearBoard(){this.game.clear(),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}setShapes(t){this.board.setShapes(t)}loadPgn(t){this.game.loadPgn(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState();const n=this.getLastMove();n&&this.board.set({lastMove:[n.from,n.to]})}getPgnInfo(){return this.game.header()}setPgnInfo(t){return this.game.header(...Object.entries(t).flat())}setConfig(t,n=!1){var r;if(n&&(t=Gl(Lh,t),this.board.state.selected=void 0),((r=t.movable)==null?void 0:r.events)&&"after"in t.movable.events){const i=t.movable.events.after;t.movable.events.after=i?async(...l)=>{await this.changeTurn(...l),i(...l)}:this.changeTurn.bind(this)}const{fen:o,...s}=t;this.board.set(s),o&&this.setPosition(o),this.board.redrawAll()}viewHistory(t){const n=this.getHistory(!0);if(t<0||t>n.length)return;const o=this.board.state.animation.enabled&&(this.boardState.historyViewerState.isEnabled&&Math.abs(this.boardState.historyViewerState.plyViewing-t)!==1||!this.boardState.historyViewerState.isEnabled&&t!==n.length-1);if(o&&this.board.set({animation:{enabled:!1}}),t<n.length)this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing=t:this.boardState.historyViewerState={isEnabled:!0,plyViewing:t,viewOnly:this.board.state.viewOnly},this.board.set({fen:n[t].before,viewOnly:!0,lastMove:t>0?[n[t-1].from,n[t-1].to]:void 0,selected:void 0}),this.displayInCheck(t>0?"+#".includes(n[t-1].san.at(-1)):!1,lo(n[t].color)),this.board.cancelPremove();else if(this.boardState.historyViewerState.isEnabled){const s=n.at(-1);this.board.set({fen:s.after,viewOnly:this.boardState.historyViewerState.viewOnly,lastMove:[s.from,s.to]}),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState({updateFen:!1})}o&&this.board.set({animation:{enabled:!0}})}stopViewingHistory(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.getCurrentPlyNumber())}viewStart(){this.viewHistory(0)}viewNext(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.boardState.historyViewerState.plyViewing+1)}viewPrevious(){const t=this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing:this.getCurrentPlyNumber();this.viewHistory(t-1)}}const tg={class:"main-board"},ng=Fo({__name:"TheChessboard",props:{boardConfig:{default:()=>({})},playerColor:{},reactiveConfig:{type:Boolean,default:!1}},emits:["boardCreated","check","checkmate","stalemate","draw","promotion","move"],setup(e,{emit:t}){const n=e,o=we(null),s=Tt({showThreats:!1,promotionDialogState:{isEnabled:!1},historyViewerState:{isEnabled:!1}});return Ws(()=>{if(o.value==null)throw new Error("vue3-chessboard: Failed to mount board.");const r=new eg(o.value,s,n,t);if(t("boardCreated",r),n.reactiveConfig){let i=ko(n.boardConfig);Ht(Tt(n.boardConfig),l=>{r.setConfig(Wl(i,l)),i=ko(l)})}}),(r,i)=>(he(),Me("section",{class:zn(["main-wrap",{disabledBoard:s.promotionDialogState.isEnabled,viewingHistory:s.historyViewerState.isEnabled}])},[R("div",tg,[s.promotionDialogState.isEnabled?(he(),wo(hh,{key:0,state:s.promotionDialogState,onPromotionSelected:i[0]||(i[0]=l=>s.promotionDialogState={isEnabled:!1})},null,8,["state"])):hn("",!0),R("div",{ref_key:"boardElement",ref:o},null,512)])],2))}});const Ea=e=>(Qn("data-v-110e7c9d"),e=e(),Yn(),e),og={class:"container"},sg={class:"chessboard-box"},rg={class:"game-info"},ig={class:"game-id"},lg={class:"material-difference"},ag={"data-cy":"winMsg"},cg=Ea(()=>R("button",{"data-cy":"createGame-button-in-play"},"PLAY NEW GAME",-1)),ug={class:"moves-box"},fg={class:"wrapper"},dg={"data-cy":"moveTable"},hg=Ea(()=>R("thead",null,[R("tr",null,[R("th",null,"#"),R("th",null,"White"),R("th",null,"Black")])],-1)),pg={__name:"Play",setup(e){const t=we([]),n=we(null),o=bn(),s=Ul(),r="psi4-django.onrender.com/",l=(window.location.protocol==="https:"?"wss://":"ws://")+r+"ws/play/"+s.game_id+"/token/"+o.token+"/",a=we(null),c=new WebSocket(l);let u;const h=s.player_color,d=we(""),g=Tt({coordinates:!0,orientation:h,viewOnly:!0,trustAllEvents:!0});Ws(()=>{c.onmessage=O=>{const M=JSON.parse(O.data);M.type==="game"?(a.value=M.status,M.status==="ACTIVE"?g.viewOnly=!1:(u==null||u.setPosition(M.FEN),g.viewOnly=!0),alert("Status: "+M.status)):M.type==="move"?u==null||u.move({from:M.from,to:M.to,promotion:M.promotion}):(alert(M.message+" Status: "+M.status+" PlayerID: "+M.playerID),u==null||u.undoLastMove())}});function m(O){let M="";O.promotion&&(M=O.promotion),c.send(JSON.stringify({type:"move",from:O.from,to:O.to,playerID:o.user_id,promotion:M}))}function b(O){(O.color==="w"?"white":"black")===h&&m(O),E(O);const W=u==null?void 0:u.getMaterialCount();n.value=W?W.materialDiff:0}function E(O){const M=t.value[t.value.length-1];O.color==="w"?t.value.push({white:O.lan,black:""}):M&&M.black===""?M.black=O.lan:t.value.push({white:"",black:O.lan}),P()}function P(){_n(()=>{const O=document.querySelector(".wrapper");O.scrollTop=O.scrollHeight})}function S(O){const M=O==="white"?"Black":"White";d.value=`${M} Wins`}function L(){d.value="Stalemate"}function V(){d.value="Draw"}return(O,M)=>(he(),Me("div",og,[R("div",sg,[R("div",rg,[R("p",ig,"Game ID: "+yt(st(s).game_id),1),R("p",lg,"Material Difference: "+yt(n.value),1),R("p",ag,yt(d.value),1),cg]),ve(st(ng),{"board-config":g,"player-color":st(h),onCheckmate:S,onMove:b,onStalemate:L,onPromotion:O.handlePromotion,onDraw:V,onBoardCreated:M[0]||(M[0]=W=>fe(u)?u.value=W:u=W),"reactive-config":""},null,8,["board-config","player-color","onPromotion"])]),R("div",ug,[R("div",fg,[R("table",dg,[hg,R("tbody",null,[(he(!0),Me(Ke,null,fl(t.value,(W,D)=>(he(),Me("tr",{key:D},[R("td",null,yt(D+1),1),R("td",null,yt(W.white),1),R("td",null,yt(W.black),1)]))),128))])])])])]))}},gg=vn(pg,[["__scopeId","data-v-110e7c9d"]]),yn=ld({history:Df("/"),routes:[{path:"/sign-up",name:"SignUp",component:qd},{path:"/log-in",name:"LogIn",component:hi},{path:"",component:hi},{path:"/creategame",name:"CreateGame",component:oh},{path:"/log-out",name:"LogOut",component:uh,meta:{requiresAuth:!0}},{path:"/play",name:"Play",component:gg,meta:{requiresAuth:!0}}]});yn.beforeEach((e,t,n)=>{const o=bn();e.matched.some(s=>s.meta.requiresAuth)?o.isAuthenticated?n():(alert("You are not authenticated to access "+e.path),n({path:"/log-in"})):n()});const fr=Yu(bd);fr.use(ef());fr.use(yn);fr.mount("#app");
